

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>sectionproperties.analysis.cross_section &mdash; sectionproperties 0.0.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> sectionproperties
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../rst/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../rst/structure.html">Structure of an Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../rst/geom_mesh.html">Creating a Geometry and Mesh</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../rst/analysis.html">Running an Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../rst/post.html">Viewing the Results</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../rst/examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../rst/api.html">Python API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../rst/theory.html">Theoretical Background</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">sectionproperties</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
      <li>sectionproperties.analysis.cross_section</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for sectionproperties.analysis.cross_section</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">scipy.sparse</span> <span class="k">import</span> <span class="n">csc_matrix</span><span class="p">,</span> <span class="n">coo_matrix</span><span class="p">,</span> <span class="n">linalg</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib.cm</span> <span class="k">as</span> <span class="nn">cm</span>
<span class="kn">import</span> <span class="nn">sectionproperties.pre.pre</span> <span class="k">as</span> <span class="nn">pre</span>
<span class="kn">import</span> <span class="nn">sectionproperties.analysis.fea</span> <span class="k">as</span> <span class="nn">fea</span>
<span class="kn">import</span> <span class="nn">sectionproperties.analysis.solver</span> <span class="k">as</span> <span class="nn">solver</span>
<span class="kn">import</span> <span class="nn">sectionproperties.post.post</span> <span class="k">as</span> <span class="nn">post</span>

<span class="c1"># TODO: fix torsion stress - or related issues???</span>


<div class="viewcode-block" id="CrossSection"><a class="viewcode-back" href="../../../rst/api.html#sectionproperties.analysis.cross_section.CrossSection">[docs]</a><span class="k">class</span> <span class="nc">CrossSection</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Class for structural cross-sections.</span>

<span class="sd">    Stores the finite element geometry, mesh and material information and</span>
<span class="sd">    provides methods to compute the cross-section properties. The element type</span>
<span class="sd">    used in this program is the six-noded quadratic triangular element.</span>

<span class="sd">    The constructor extracts information from the provided mesh object and</span>
<span class="sd">    creates and stores corresponding Tri6 finite element objects.</span>

<span class="sd">    :param geometry: Cross-section geometry object used to generate the mesh</span>
<span class="sd">    :type geometry: :class:`~sectionproperties.pre.sections.Geometry`</span>
<span class="sd">    :param mesh: Mesh object returned by meshpy</span>
<span class="sd">    :type mesh: :class:`meshpy.triangle.MeshInfo`</span>
<span class="sd">    :param materials: A list of material objects corresponding to the various</span>
<span class="sd">        regions in the geometry and mesh. Note that if materials are specified,</span>
<span class="sd">        the number of material objects must equal the number of regions in the</span>
<span class="sd">        geometry. If no materials are specified, all elements will be assigned</span>
<span class="sd">        a default material with an elastic modulus and yield strength equal to</span>
<span class="sd">        1, and a Poisson&#39;s ratio equal to 0.</span>
<span class="sd">    :type materials: list[:class:`~sectionproperties.pre.pre.Material`]</span>

<span class="sd">    The following example creates a</span>
<span class="sd">    :class:`~sectionproperties.analysis.cross_section.CrossSection` object of a</span>
<span class="sd">    100D x 50W rectangle using a mesh size of 5::</span>

<span class="sd">            import sectionproperties.pre.sections as sections</span>
<span class="sd">            from sectionproperties.analysis.cross_section import CrossSection</span>

<span class="sd">            geometry = sections.RectangularSection(d=100, b=50)</span>
<span class="sd">            mesh = geometry.create_mesh(mesh_sizes=[5])</span>
<span class="sd">            section = CrossSection(geometry, mesh)</span>

<span class="sd">    :cvar elements: List of finite element objects describing the cross-section</span>
<span class="sd">        mesh</span>
<span class="sd">    :vartype elements: list[:class:`~sectionproperties.analysis.fea.Tri6`]</span>
<span class="sd">    :cvar int num_nodes: Number of nodes in the finite element mesh</span>
<span class="sd">    :cvar geometry: Cross-section geometry object used to generate the mesh</span>
<span class="sd">    :vartype geometry: :class:`~sectionproperties.pre.sections.Geometry`</span>
<span class="sd">    :cvar mesh: Mesh object returned by meshpy</span>
<span class="sd">    :vartype mesh: :class:`meshpy.triangle.MeshInfo`</span>
<span class="sd">    :cvar mesh_nodes: Array of node coordinates from the mesh</span>
<span class="sd">    :vartype mesh_nodes: :class:`numpy.ndarray`</span>
<span class="sd">    :cvar mesh_elements: Array of connectivities from the mesh</span>
<span class="sd">    :vartype mesh_elements: :class:`numpy.ndarray`</span>
<span class="sd">    :cvar mesh_attributes: Array of attributes from the mesh</span>
<span class="sd">    :vartype mesh_attributes: :class:`numpy.ndarray`</span>
<span class="sd">    :cvar materials: List of materials</span>
<span class="sd">    :type materials: list[:class:`~sectionproperties.pre.pre.Material`]</span>
<span class="sd">    :cvar section_props: Class to store calculated section properties</span>
<span class="sd">    :vartype section_props:</span>
<span class="sd">        :class:`~sectionproperties.analysis.cross_section.SectionProperties`</span>

<span class="sd">    :raises AssertionError: If the number of materials does not equal the</span>
<span class="sd">        number of regions</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">geometry</span><span class="p">,</span> <span class="n">mesh</span><span class="p">,</span> <span class="n">materials</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Inits the CrossSection class.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">geometry</span> <span class="o">=</span> <span class="n">geometry</span>  <span class="c1"># save geometry data</span>

        <span class="c1"># extract mesh data</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">mesh</span><span class="o">.</span><span class="n">points</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">dtype</span><span class="p">(</span><span class="nb">float</span><span class="p">))</span>
        <span class="n">elements</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">mesh</span><span class="o">.</span><span class="n">elements</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">dtype</span><span class="p">(</span><span class="nb">int</span><span class="p">))</span>
        <span class="n">attributes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">mesh</span><span class="o">.</span><span class="n">element_attributes</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">dtype</span><span class="p">(</span><span class="nb">int</span><span class="p">))</span>

        <span class="c1"># swap mid-node order to retain node ordering consistency</span>
        <span class="n">elements</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]]</span> <span class="o">=</span> <span class="n">elements</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]</span>

        <span class="c1"># if materials are specified, check that the right number of material</span>
        <span class="c1"># properties are specified</span>
        <span class="k">if</span> <span class="n">materials</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Number of materials (</span><span class="si">{0}</span><span class="s2">), &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">materials</span><span class="p">))</span>
            <span class="nb">str</span> <span class="o">+=</span> <span class="s2">&quot;should match the number of regions (</span><span class="si">{0}</span><span class="s2">).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="nb">max</span><span class="p">(</span><span class="n">attributes</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">assert</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">materials</span><span class="p">)</span> <span class="o">==</span> <span class="nb">max</span><span class="p">(</span><span class="n">attributes</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="nb">str</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">materials</span> <span class="o">=</span> <span class="n">materials</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">elements</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># initialise list holding all element objects</span>

        <span class="c1"># build the mesh one element at a time</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">node_ids</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">elements</span><span class="p">):</span>
            <span class="n">x1</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">node_ids</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">y1</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">node_ids</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">x2</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">node_ids</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">y2</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">node_ids</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">x3</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">node_ids</span><span class="p">[</span><span class="mi">2</span><span class="p">]][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">y3</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">node_ids</span><span class="p">[</span><span class="mi">2</span><span class="p">]][</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">x4</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">node_ids</span><span class="p">[</span><span class="mi">3</span><span class="p">]][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">y4</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">node_ids</span><span class="p">[</span><span class="mi">3</span><span class="p">]][</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">x5</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">node_ids</span><span class="p">[</span><span class="mi">4</span><span class="p">]][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">y5</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">node_ids</span><span class="p">[</span><span class="mi">4</span><span class="p">]][</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">x6</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">node_ids</span><span class="p">[</span><span class="mi">5</span><span class="p">]][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">y6</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">node_ids</span><span class="p">[</span><span class="mi">5</span><span class="p">]][</span><span class="mi">1</span><span class="p">]</span>

            <span class="c1"># create a list containing the vertex and mid-node coordinates</span>
            <span class="n">coords</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
                <span class="p">[[</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">x3</span><span class="p">,</span> <span class="n">x4</span><span class="p">,</span> <span class="n">x5</span><span class="p">,</span> <span class="n">x6</span><span class="p">],</span> <span class="p">[</span><span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">y3</span><span class="p">,</span> <span class="n">y4</span><span class="p">,</span> <span class="n">y5</span><span class="p">,</span> <span class="n">y6</span><span class="p">]])</span>

            <span class="c1"># if materials are specified, get the material</span>
            <span class="k">if</span> <span class="n">materials</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># get attribute index of current element</span>
                <span class="n">att_el</span> <span class="o">=</span> <span class="n">attributes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

                <span class="c1"># fetch the material</span>
                <span class="n">material</span> <span class="o">=</span> <span class="n">materials</span><span class="p">[</span><span class="n">att_el</span><span class="p">]</span>
            <span class="c1"># if there are no materials specified, use a default material</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">material</span> <span class="o">=</span> <span class="n">pre</span><span class="o">.</span><span class="n">Material</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

            <span class="c1"># add tri6 elements to the mesh</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fea</span><span class="o">.</span><span class="n">Tri6</span><span class="p">(</span><span class="n">coords</span><span class="p">,</span> <span class="n">node_ids</span><span class="p">,</span> <span class="n">material</span><span class="p">))</span>

        <span class="c1"># save total number of nodes in mesh</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_nodes</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">nodes</span><span class="p">)</span>

        <span class="c1"># save mesh input</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mesh</span> <span class="o">=</span> <span class="n">mesh</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mesh_nodes</span> <span class="o">=</span> <span class="n">nodes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mesh_elements</span> <span class="o">=</span> <span class="n">elements</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mesh_attributes</span> <span class="o">=</span> <span class="n">attributes</span>

        <span class="c1"># initialise class storing section properties</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span> <span class="o">=</span> <span class="n">SectionProperties</span><span class="p">()</span>

<div class="viewcode-block" id="CrossSection.calculate_geometric_properties"><a class="viewcode-back" href="../../../rst/api.html#sectionproperties.analysis.cross_section.CrossSection.calculate_geometric_properties">[docs]</a>    <span class="k">def</span> <span class="nf">calculate_geometric_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time_info</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Calculates all the geometric properties of the cross-section and</span>
<span class="sd">        stores them in the</span>
<span class="sd">        :class:`~sectionproperties.analysis.cross_section.SectionProperties`</span>
<span class="sd">        object contained in section_props.</span>

<span class="sd">        :param bool time_info: If set to True, a detailed description of the</span>
<span class="sd">            computation and the time cost is printed to the terminal.</span>

<span class="sd">        The following section properties are calculated:</span>

<span class="sd">        * Area</span>
<span class="sd">        * First moments of area</span>
<span class="sd">        * Second moments of area about the global axis</span>
<span class="sd">        * Second moments of area about the centroidal axis</span>
<span class="sd">        * Centroidal section moduli</span>
<span class="sd">        * Radii of gyration</span>
<span class="sd">        * Principal axis properties</span>

<span class="sd">        ::</span>

<span class="sd">            section = CrossSection(geometry, mesh)</span>
<span class="sd">            section.calculate_geometric_properties()</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># TODO: which properties to change calculation for composite???</span>

        <span class="k">def</span> <span class="nf">calculate_geom</span><span class="p">():</span>
            <span class="c1"># initialise properties</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">area</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">qx</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">qy</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">ixx_g</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">iyy_g</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">ixy_g</span> <span class="o">=</span> <span class="mi">0</span>

            <span class="c1"># calculate global geometric properties</span>
            <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">elements</span><span class="p">:</span>
                <span class="p">(</span><span class="n">area</span><span class="p">,</span> <span class="n">qx</span><span class="p">,</span> <span class="n">qy</span><span class="p">,</span> <span class="n">ixx_g</span><span class="p">,</span> <span class="n">iyy_g</span><span class="p">,</span> <span class="n">ixy_g</span><span class="p">)</span> <span class="o">=</span> <span class="n">el</span><span class="o">.</span><span class="n">geometric_properties</span><span class="p">()</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">area</span> <span class="o">+=</span> <span class="n">area</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">qx</span> <span class="o">+=</span> <span class="n">qx</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">qy</span> <span class="o">+=</span> <span class="n">qy</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">ixx_g</span> <span class="o">+=</span> <span class="n">ixx_g</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">iyy_g</span> <span class="o">+=</span> <span class="n">iyy_g</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">ixy_g</span> <span class="o">+=</span> <span class="n">ixy_g</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="c1"># TODO: calculate and store ea, eqx, eqy, eixx_g etc...</span>
                    <span class="k">pass</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">calculate_elastic_centroid</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">calculate_centroidal_properties</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mesh</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">time_info</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;--Calculating geometric section properties...&quot;</span>
            <span class="n">solver</span><span class="o">.</span><span class="n">function_timer</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">calculate_geom</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">calculate_geom</span><span class="p">()</span></div>

<div class="viewcode-block" id="CrossSection.calculate_warping_properties"><a class="viewcode-back" href="../../../rst/api.html#sectionproperties.analysis.cross_section.CrossSection.calculate_warping_properties">[docs]</a>    <span class="k">def</span> <span class="nf">calculate_warping_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time_info</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                     <span class="n">solver_type</span><span class="o">=</span><span class="s1">&#39;direct&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Calculates all the warping properties of the cross-section and</span>
<span class="sd">        stores them in the</span>
<span class="sd">        :class:`~sectionproperties.analysis.cross_section.SectionProperties`</span>
<span class="sd">        object contained in section_props.</span>

<span class="sd">        :param bool time_info: If set to True, a detailed description of the</span>
<span class="sd">            computation and the time cost is printed to the terminal.</span>
<span class="sd">        :param string solver_type: Solver used for solving systems of linear</span>
<span class="sd">            equations, either using the *&#39;direct&#39;* method or *&#39;cgs&#39;* iterative</span>
<span class="sd">            method</span>

<span class="sd">        The following section properties are calculated:</span>

<span class="sd">        * Torsion constant</span>
<span class="sd">        * Shear centre</span>
<span class="sd">        * Shear area</span>
<span class="sd">        * Warping constant</span>

<span class="sd">        Note that the geometric properties must be calculated first for the</span>
<span class="sd">        calculation of the warping properties to be correct::</span>

<span class="sd">            section = CrossSection(geometry, mesh)</span>
<span class="sd">            section.calculate_geometric_properties()</span>
<span class="sd">            section.calculate_warping_properties()</span>

<span class="sd">        :raises RuntimeError: If the geometric properties have not been</span>
<span class="sd">            calculated prior to calling this method</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># TODO: modify calculations so that it works for composite materials</span>

        <span class="c1"># check that a geometric analysis has been performed</span>
        <span class="k">if</span> <span class="kc">None</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">area</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">ixx_c</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">cx</span><span class="p">]:</span>
            <span class="n">err</span> <span class="o">=</span> <span class="s2">&quot;Cacluate geometric properties before &quot;</span>
            <span class="n">err</span> <span class="o">+=</span> <span class="s2">&quot;performing warping analysis.&quot;</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>

        <span class="c1"># create a new CrossSection with the origin shifted to the centroid for</span>
        <span class="c1"># calculation of the warping properties such that the Lagrangian</span>
        <span class="c1"># multiplier approach can be utilised</span>
        <span class="n">warping_section</span> <span class="o">=</span> <span class="n">CrossSection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">geometry</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mesh</span><span class="p">)</span>

        <span class="c1"># shift the coordinates of each element</span>
        <span class="c1"># N.B. the mesh class attribute remains unshifted!</span>
        <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">warping_section</span><span class="o">.</span><span class="n">elements</span><span class="p">:</span>
            <span class="n">el</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:]</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">cx</span>
            <span class="n">el</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="p">:]</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">cy</span>

        <span class="c1"># shift the mesh_nodes</span>
        <span class="n">warping_section</span><span class="o">.</span><span class="n">mesh_nodes</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">cx</span>
        <span class="n">warping_section</span><span class="o">.</span><span class="n">mesh_nodes</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">cy</span>

        <span class="c1"># assemble stiffness matrix and load vector for warping function</span>
        <span class="k">if</span> <span class="n">time_info</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;--Assembing </span><span class="si">{0}</span><span class="s2">x</span><span class="si">{0}</span><span class="s2"> stiffness&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_nodes</span><span class="p">)</span>
            <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot; matrix and load vector...&quot;</span>
            <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">k_lg</span><span class="p">,</span> <span class="n">f_torsion</span><span class="p">)</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">function_timer</span><span class="p">(</span>
                <span class="n">text</span><span class="p">,</span> <span class="n">warping_section</span><span class="o">.</span><span class="n">assemble_torsion</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">k_lg</span><span class="p">,</span> <span class="n">f_torsion</span><span class="p">)</span> <span class="o">=</span> <span class="n">warping_section</span><span class="o">.</span><span class="n">assemble_torsion</span><span class="p">()</span>

        <span class="c1"># ILU decomposition of stiffness matrices</span>
        <span class="k">def</span> <span class="nf">ilu_decomp</span><span class="p">():</span>
            <span class="c1"># ILU decomposition on regular stiffness matrix</span>
            <span class="n">k_precond</span> <span class="o">=</span> <span class="n">linalg</span><span class="o">.</span><span class="n">LinearOperator</span><span class="p">(</span>
                <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_nodes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_nodes</span><span class="p">),</span> <span class="n">linalg</span><span class="o">.</span><span class="n">spilu</span><span class="p">(</span><span class="n">k</span><span class="p">)</span><span class="o">.</span><span class="n">solve</span><span class="p">)</span>

            <span class="c1"># ILU decomposition on Lagrangian stiffness matrix</span>
            <span class="n">k_lg_precond</span> <span class="o">=</span> <span class="n">linalg</span><span class="o">.</span><span class="n">LinearOperator</span><span class="p">(</span>
                <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_nodes</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_nodes</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span>
                <span class="n">linalg</span><span class="o">.</span><span class="n">spilu</span><span class="p">(</span><span class="n">k_lg</span><span class="p">)</span><span class="o">.</span><span class="n">solve</span><span class="p">)</span>

            <span class="k">return</span> <span class="p">(</span><span class="n">k_precond</span><span class="p">,</span> <span class="n">k_lg_precond</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">solver_type</span> <span class="o">==</span> <span class="s1">&#39;cgs&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">time_info</span><span class="p">:</span>
                <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;--Performing ILU decomposition on stiffness&quot;</span>
                <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot;matrices...&quot;</span>
                <span class="p">(</span><span class="n">k_precond</span><span class="p">,</span> <span class="n">k_lg_precond</span><span class="p">)</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">function_timer</span><span class="p">(</span>
                    <span class="n">text</span><span class="p">,</span> <span class="n">ilu_decomp</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="p">(</span><span class="n">k_precond</span><span class="p">,</span> <span class="n">k_lg_precond</span><span class="p">)</span> <span class="o">=</span> <span class="n">ilu_decomp</span><span class="p">()</span>

        <span class="c1"># solve for warping constant</span>
        <span class="k">def</span> <span class="nf">solve_warping</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">solver_type</span> <span class="o">==</span> <span class="s1">&#39;cgs&#39;</span><span class="p">:</span>
                <span class="n">omega</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">solve_cgs</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">f_torsion</span><span class="p">,</span> <span class="n">k_precond</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">solver_type</span> <span class="o">==</span> <span class="s1">&#39;direct&#39;</span><span class="p">:</span>
                <span class="n">omega</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">solve_direct</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">f_torsion</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">omega</span>

        <span class="k">if</span> <span class="n">time_info</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;--Solving for the warping constant using the &quot;</span>
            <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> solver...&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">solver_type</span><span class="p">)</span>
            <span class="n">omega</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">function_timer</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">solve_warping</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">omega</span> <span class="o">=</span> <span class="n">solve_warping</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">omega</span> <span class="o">=</span> <span class="n">omega</span>

        <span class="c1"># determine the torsion constant</span>
        <span class="k">def</span> <span class="nf">j_func</span><span class="p">():</span>
            <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">ixx_c</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">iyy_c</span> <span class="o">-</span>
                    <span class="n">omega</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">omega</span><span class="p">))))</span>

        <span class="k">if</span> <span class="n">time_info</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;--Computing the torsion constant...&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">j</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">function_timer</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">j_func</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">j</span> <span class="o">=</span> <span class="n">j_func</span><span class="p">()</span>

        <span class="c1"># assemble shear function load vectors</span>
        <span class="k">def</span> <span class="nf">assemble_shear_load</span><span class="p">():</span>
            <span class="n">f_psi</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_nodes</span><span class="p">)</span>
            <span class="n">f_phi</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_nodes</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">warping_section</span><span class="o">.</span><span class="n">elements</span><span class="p">:</span>
                <span class="p">(</span><span class="n">f_psi_el</span><span class="p">,</span> <span class="n">f_phi_el</span><span class="p">)</span> <span class="o">=</span> <span class="n">el</span><span class="o">.</span><span class="n">shear_load_vectors</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">ixx_c</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">iyy_c</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">ixy_c</span><span class="p">)</span>
                <span class="n">f_psi</span><span class="p">[</span><span class="n">el</span><span class="o">.</span><span class="n">node_ids</span><span class="p">]</span> <span class="o">+=</span> <span class="n">f_psi_el</span>
                <span class="n">f_phi</span><span class="p">[</span><span class="n">el</span><span class="o">.</span><span class="n">node_ids</span><span class="p">]</span> <span class="o">+=</span> <span class="n">f_phi_el</span>

            <span class="k">return</span> <span class="p">(</span><span class="n">f_psi</span><span class="p">,</span> <span class="n">f_phi</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">time_info</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;--Assembling shear function load vectors...&quot;</span>
            <span class="p">(</span><span class="n">f_psi</span><span class="p">,</span> <span class="n">f_phi</span><span class="p">)</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">function_timer</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">assemble_shear_load</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="p">(</span><span class="n">f_psi</span><span class="p">,</span> <span class="n">f_phi</span><span class="p">)</span> <span class="o">=</span> <span class="n">assemble_shear_load</span><span class="p">()</span>

        <span class="c1"># solve for shear functions psi and phi</span>
        <span class="k">def</span> <span class="nf">solve_shear_functions</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">solver_type</span> <span class="o">==</span> <span class="s1">&#39;cgs&#39;</span><span class="p">:</span>
                <span class="n">psi_shear</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">solve_cgs_lagrange</span><span class="p">(</span><span class="n">k_lg</span><span class="p">,</span> <span class="n">f_psi</span><span class="p">,</span>
                                                      <span class="n">m</span><span class="o">=</span><span class="n">k_lg_precond</span><span class="p">)</span>
                <span class="n">phi_shear</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">solve_cgs_lagrange</span><span class="p">(</span><span class="n">k_lg</span><span class="p">,</span> <span class="n">f_phi</span><span class="p">,</span>
                                                      <span class="n">m</span><span class="o">=</span><span class="n">k_lg_precond</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">solver_type</span> <span class="o">==</span> <span class="s1">&#39;direct&#39;</span><span class="p">:</span>
                <span class="n">psi_shear</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">solve_direct_lagrange</span><span class="p">(</span><span class="n">k_lg</span><span class="p">,</span> <span class="n">f_psi</span><span class="p">)</span>
                <span class="n">phi_shear</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">solve_direct_lagrange</span><span class="p">(</span><span class="n">k_lg</span><span class="p">,</span> <span class="n">f_phi</span><span class="p">)</span>

            <span class="k">return</span> <span class="p">(</span><span class="n">psi_shear</span><span class="p">,</span> <span class="n">phi_shear</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">time_info</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;--Solving for the shear functions using the &quot;</span>
            <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> solver...&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">solver_type</span><span class="p">)</span>
            <span class="p">(</span><span class="n">psi_shear</span><span class="p">,</span> <span class="n">phi_shear</span><span class="p">)</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">function_timer</span><span class="p">(</span>
                <span class="n">text</span><span class="p">,</span> <span class="n">solve_shear_functions</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="p">(</span><span class="n">psi_shear</span><span class="p">,</span> <span class="n">phi_shear</span><span class="p">)</span> <span class="o">=</span> <span class="n">solve_shear_functions</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">psi_shear</span> <span class="o">=</span> <span class="n">psi_shear</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">phi_shear</span> <span class="o">=</span> <span class="n">psi_shear</span>

        <span class="c1"># assemble shear centre and warping moment integrals</span>
        <span class="k">def</span> <span class="nf">assemle_sc_warping_integrals</span><span class="p">():</span>
            <span class="n">sc_xint</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">sc_yint</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">q_omega</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">i_omega</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">i_xomega</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">i_yomega</span> <span class="o">=</span> <span class="mi">0</span>

            <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">warping_section</span><span class="o">.</span><span class="n">elements</span><span class="p">:</span>
                <span class="p">(</span><span class="n">sc_xint_el</span><span class="p">,</span> <span class="n">sc_yint_el</span><span class="p">,</span> <span class="n">q_omega_el</span><span class="p">,</span> <span class="n">i_omega_el</span><span class="p">,</span> <span class="n">i_xomega_el</span><span class="p">,</span>
                 <span class="n">i_yomega_el</span><span class="p">)</span> <span class="o">=</span> <span class="n">el</span><span class="o">.</span><span class="n">shear_warping_integrals</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">ixx_c</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">iyy_c</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">ixy_c</span><span class="p">,</span> <span class="n">omega</span><span class="p">[</span><span class="n">el</span><span class="o">.</span><span class="n">node_ids</span><span class="p">])</span>

                <span class="n">sc_xint</span> <span class="o">+=</span> <span class="n">sc_xint_el</span>
                <span class="n">sc_yint</span> <span class="o">+=</span> <span class="n">sc_yint_el</span>
                <span class="n">q_omega</span> <span class="o">+=</span> <span class="n">q_omega_el</span>
                <span class="n">i_omega</span> <span class="o">+=</span> <span class="n">i_omega_el</span>
                <span class="n">i_xomega</span> <span class="o">+=</span> <span class="n">i_xomega_el</span>
                <span class="n">i_yomega</span> <span class="o">+=</span> <span class="n">i_yomega_el</span>

            <span class="k">return</span> <span class="p">(</span><span class="n">sc_xint</span><span class="p">,</span> <span class="n">sc_yint</span><span class="p">,</span> <span class="n">q_omega</span><span class="p">,</span> <span class="n">i_omega</span><span class="p">,</span> <span class="n">i_xomega</span><span class="p">,</span> <span class="n">i_yomega</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">time_info</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;--Assembling shear centre and warping moment integrals...&quot;</span>
            <span class="p">(</span><span class="n">sc_xint</span><span class="p">,</span> <span class="n">sc_yint</span><span class="p">,</span> <span class="n">q_omega</span><span class="p">,</span> <span class="n">i_omega</span><span class="p">,</span> <span class="n">i_xomega</span><span class="p">,</span> <span class="n">i_yomega</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">solver</span><span class="o">.</span><span class="n">function_timer</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">assemle_sc_warping_integrals</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="p">(</span><span class="n">sc_xint</span><span class="p">,</span> <span class="n">sc_yint</span><span class="p">,</span> <span class="n">q_omega</span><span class="p">,</span> <span class="n">i_omega</span><span class="p">,</span> <span class="n">i_xomega</span><span class="p">,</span> <span class="n">i_yomega</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">assemle_sc_warping_integrals</span><span class="p">())</span>

        <span class="c1"># calculate effective Poisson&#39;s ratio</span>
        <span class="n">nu</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># TODO: implement</span>

        <span class="c1"># calculate shear centres</span>
        <span class="k">def</span> <span class="nf">shear_centres</span><span class="p">():</span>
            <span class="c1"># calculate shear centres (elasticity approach)</span>
            <span class="n">Delta_s</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">nu</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">ixx_c</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">iyy_c</span> <span class="o">-</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">ixy_c</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
            <span class="n">x_se</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="n">Delta_s</span><span class="p">)</span> <span class="o">*</span> <span class="p">((</span><span class="n">nu</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">sc_xint</span><span class="p">)</span> <span class="o">-</span> <span class="n">f_torsion</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span>
                <span class="n">phi_shear</span><span class="p">))</span>
            <span class="n">y_se</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="n">Delta_s</span><span class="p">)</span> <span class="o">*</span> <span class="p">((</span><span class="n">nu</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">sc_yint</span><span class="p">)</span> <span class="o">+</span> <span class="n">f_torsion</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span>
                <span class="n">psi_shear</span><span class="p">))</span>
            <span class="p">(</span><span class="n">x1_se</span><span class="p">,</span> <span class="n">y2_se</span><span class="p">)</span> <span class="o">=</span> <span class="n">fea</span><span class="o">.</span><span class="n">principal_coordinate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">phi</span><span class="p">,</span>
                                                      <span class="n">x_se</span><span class="p">,</span> <span class="n">y_se</span><span class="p">)</span>

            <span class="c1"># calculate shear centres (Trefftz&#39;s approach)</span>
            <span class="n">x_st</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">ixy_c</span> <span class="o">*</span>
                    <span class="n">i_xomega</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">iyy_c</span> <span class="o">*</span> <span class="n">i_yomega</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">ixx_c</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">iyy_c</span> <span class="o">-</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">ixy_c</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
            <span class="n">y_st</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">ixx_c</span> <span class="o">*</span>
                    <span class="n">i_xomega</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">ixy_c</span> <span class="o">*</span> <span class="n">i_yomega</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">ixx_c</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">iyy_c</span> <span class="o">-</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">ixy_c</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>

            <span class="k">return</span> <span class="p">(</span><span class="n">Delta_s</span><span class="p">,</span> <span class="n">x_se</span><span class="p">,</span> <span class="n">y_se</span><span class="p">,</span> <span class="n">x1_se</span><span class="p">,</span> <span class="n">y2_se</span><span class="p">,</span> <span class="n">x_st</span><span class="p">,</span> <span class="n">y_st</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">time_info</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;--Calculating shear centres...&quot;</span>
            <span class="p">(</span><span class="n">Delta_s</span><span class="p">,</span> <span class="n">x_se</span><span class="p">,</span> <span class="n">y_se</span><span class="p">,</span> <span class="n">x1_se</span><span class="p">,</span> <span class="n">y2_se</span><span class="p">,</span> <span class="n">x_st</span><span class="p">,</span> <span class="n">y_st</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">solver</span><span class="o">.</span><span class="n">function_timer</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">shear_centres</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="p">(</span><span class="n">Delta_s</span><span class="p">,</span> <span class="n">x_se</span><span class="p">,</span> <span class="n">y_se</span><span class="p">,</span> <span class="n">x1_se</span><span class="p">,</span> <span class="n">y2_se</span><span class="p">,</span> <span class="n">x_st</span><span class="p">,</span> <span class="n">y_st</span><span class="p">)</span> <span class="o">=</span> <span class="n">shear_centres</span><span class="p">()</span>

        <span class="c1"># save shear centres</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">Delta_s</span> <span class="o">=</span> <span class="n">Delta_s</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">x_se</span> <span class="o">=</span> <span class="n">x_se</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">y_se</span> <span class="o">=</span> <span class="n">y_se</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">x1_se</span> <span class="o">=</span> <span class="n">x1_se</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">y2_se</span> <span class="o">=</span> <span class="n">y2_se</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">x_st</span> <span class="o">=</span> <span class="n">x_st</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">y_st</span> <span class="o">=</span> <span class="n">y_st</span>

        <span class="c1"># calculate warping constant</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">i_omega</span> <span class="o">-</span> <span class="n">q_omega</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">area</span> <span class="o">-</span>
            <span class="n">y_se</span> <span class="o">*</span> <span class="n">i_xomega</span> <span class="o">+</span> <span class="n">x_se</span> <span class="o">*</span> <span class="n">i_yomega</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">assemble_shear_deformation</span><span class="p">():</span>
            <span class="c1"># assemble shear deformation coefficients</span>
            <span class="n">kappa_x</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">kappa_y</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">kappa_xy</span> <span class="o">=</span> <span class="mi">0</span>

            <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">warping_section</span><span class="o">.</span><span class="n">elements</span><span class="p">:</span>
                <span class="p">(</span><span class="n">kappa_x_el</span><span class="p">,</span> <span class="n">kappa_y_el</span><span class="p">,</span> <span class="n">kappa_xy_el</span><span class="p">)</span> <span class="o">=</span> <span class="n">el</span><span class="o">.</span><span class="n">shear_coefficients</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">ixx_c</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">iyy_c</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">ixy_c</span><span class="p">,</span> <span class="n">psi_shear</span><span class="p">[</span><span class="n">el</span><span class="o">.</span><span class="n">node_ids</span><span class="p">],</span>
                    <span class="n">phi_shear</span><span class="p">[</span><span class="n">el</span><span class="o">.</span><span class="n">node_ids</span><span class="p">])</span>
                <span class="n">kappa_x</span> <span class="o">+=</span> <span class="n">kappa_x_el</span>
                <span class="n">kappa_y</span> <span class="o">+=</span> <span class="n">kappa_y_el</span>
                <span class="n">kappa_xy</span> <span class="o">+=</span> <span class="n">kappa_xy_el</span>

            <span class="k">return</span> <span class="p">(</span><span class="n">kappa_x</span><span class="p">,</span> <span class="n">kappa_y</span><span class="p">,</span> <span class="n">kappa_xy</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">time_info</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;--Assembling shear deformation coefficients...&quot;</span>
            <span class="p">(</span><span class="n">kappa_x</span><span class="p">,</span> <span class="n">kappa_y</span><span class="p">,</span> <span class="n">kappa_xy</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">solver</span><span class="o">.</span><span class="n">function_timer</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">assemble_shear_deformation</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="p">(</span><span class="n">kappa_x</span><span class="p">,</span> <span class="n">kappa_y</span><span class="p">,</span> <span class="n">kappa_xy</span><span class="p">)</span> <span class="o">=</span> <span class="n">assemble_shear_deformation</span><span class="p">()</span>

        <span class="c1"># calculate shear areas wrt global axis</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">A_sx</span> <span class="o">=</span> <span class="n">Delta_s</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">/</span> <span class="n">kappa_x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">A_sy</span> <span class="o">=</span> <span class="n">Delta_s</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">/</span> <span class="n">kappa_y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">A_sxy</span> <span class="o">=</span> <span class="n">Delta_s</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">/</span> <span class="n">kappa_xy</span>

        <span class="c1"># calculate shear areas wrt principal bending axis:</span>
        <span class="n">alpha_xx</span> <span class="o">=</span> <span class="n">kappa_x</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">area</span> <span class="o">/</span> <span class="n">Delta_s</span> <span class="o">**</span> <span class="mi">2</span>
        <span class="n">alpha_yy</span> <span class="o">=</span> <span class="n">kappa_y</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">area</span> <span class="o">/</span> <span class="n">Delta_s</span> <span class="o">**</span> <span class="mi">2</span>
        <span class="n">alpha_xy</span> <span class="o">=</span> <span class="n">kappa_xy</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">area</span> <span class="o">/</span> <span class="n">Delta_s</span> <span class="o">**</span> <span class="mi">2</span>

        <span class="c1"># rotate the tensor by the principal axis angle</span>
        <span class="n">phi_rad</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">phi</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">180</span>
        <span class="n">R</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">phi_rad</span><span class="p">),</span>  <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">phi_rad</span><span class="p">)],</span>
                       <span class="p">[</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">phi_rad</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">phi_rad</span><span class="p">)]]))</span>

        <span class="n">rotatedAlpha</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
            <span class="p">[[</span><span class="n">alpha_xx</span><span class="p">,</span> <span class="n">alpha_xy</span><span class="p">],</span>
             <span class="p">[</span><span class="n">alpha_xy</span><span class="p">,</span> <span class="n">alpha_yy</span><span class="p">]]))</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">R</span><span class="p">))</span>

        <span class="c1"># recalculate the shear area based on the rotated alpha value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">A_s11</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">area</span> <span class="o">/</span> <span class="n">rotatedAlpha</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">A_s22</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">area</span> <span class="o">/</span> <span class="n">rotatedAlpha</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span></div>

<div class="viewcode-block" id="CrossSection.calculate_plastic_properties"><a class="viewcode-back" href="../../../rst/api.html#sectionproperties.analysis.cross_section.CrossSection.calculate_plastic_properties">[docs]</a>    <span class="k">def</span> <span class="nf">calculate_plastic_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time_info</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;s&quot;&quot;&quot;</span></div>

        <span class="c1"># TODO: implement</span>

<div class="viewcode-block" id="CrossSection.calculate_stress"><a class="viewcode-back" href="../../../rst/api.html#sectionproperties.analysis.cross_section.CrossSection.calculate_stress">[docs]</a>    <span class="k">def</span> <span class="nf">calculate_stress</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">Vx</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">Vy</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">Mxx</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">Myy</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">M11</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">M22</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                         <span class="n">Mzz</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">time_info</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Calculates the cross-section stress resulting from design actions</span>
<span class="sd">        and returns a</span>
<span class="sd">        :class:`~sectionproperties.analysis.cross_section.StressResult` object</span>
<span class="sd">        containing the cross-section stresses.</span>

<span class="sd">        :param float N: Axial force</span>
<span class="sd">        :param float Vx: Shear force acting in the x-direction</span>
<span class="sd">        :param float Vy: Shear force acting in the y-direction</span>
<span class="sd">        :param float Mxx: Bending moment about the centroidal xx-axis</span>
<span class="sd">        :param float Myy: Bending moment about the centroidal yy-axis</span>
<span class="sd">        :param float M11: Bending moment about the centroidal 11-axis</span>
<span class="sd">        :param float M22: Bending moment about the centroidal 22-axis</span>
<span class="sd">        :param float Mzz: Torsion moment about the centroidal zz-axis</span>
<span class="sd">        :param bool time_info: If set to True, a detailed description of the</span>
<span class="sd">            computation and the time cost is printed to the terminal.</span>
<span class="sd">        :return: Object containing the cross-section stresses</span>
<span class="sd">        :rtype: :class:`~sectionproperties.analysis.cross_section.StressResult`</span>

<span class="sd">        Note that a geometric and warping analysis must be performed before a</span>
<span class="sd">        stress analysis is carried out::</span>

<span class="sd">            section = CrossSection(geometry, mesh)</span>
<span class="sd">            section.calculate_geometric_properties()</span>
<span class="sd">            section.calculate_warping_properties()</span>
<span class="sd">            stress_result = section.calculate_stress(N=1e3, Vy=3e3, Mxx=1e6)</span>

<span class="sd">        :raises RuntimeError: If a geometric and warping analysis have not been</span>
<span class="sd">            performed prior to calling this method</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># TODO: implement based on composite materials</span>

        <span class="c1"># check that a geometric and warping analysis has been performed</span>
        <span class="k">if</span> <span class="kc">None</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">area</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">ixx_c</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">cx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">j</span><span class="p">]:</span>
            <span class="n">err</span> <span class="o">=</span> <span class="s2">&quot;Perform a geometric and warping analysis before &quot;</span>
            <span class="n">err</span> <span class="o">+=</span> <span class="s2">&quot;carrying out a stress analysis.&quot;</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">calc_stress</span><span class="p">():</span>
            <span class="c1"># create stress result object</span>
            <span class="n">stress_result</span> <span class="o">=</span> <span class="n">StressResult</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_nodes</span><span class="p">)</span>

            <span class="c1"># allocate nodal weights vector for nodal averaging</span>
            <span class="n">nodal_weights</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_nodes</span><span class="p">)</span>

            <span class="c1"># loop through all elements in the mesh</span>
            <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">elements</span><span class="p">:</span>
                <span class="c1"># evaluate stresses at nodes of the current element</span>
                <span class="p">(</span><span class="n">sig_zz_n_el</span><span class="p">,</span> <span class="n">sig_zz_mxx_el</span><span class="p">,</span> <span class="n">sig_zz_myy_el</span><span class="p">,</span> <span class="n">sig_zz_m11_el</span><span class="p">,</span>
                    <span class="n">sig_zz_m22_el</span><span class="p">,</span> <span class="n">sig_zx_mzz_el</span><span class="p">,</span> <span class="n">sig_zy_mzz_el</span><span class="p">,</span> <span class="n">sig_zx_vx_el</span><span class="p">,</span>
                    <span class="n">sig_zy_vx_el</span><span class="p">,</span> <span class="n">sig_zx_vy_el</span><span class="p">,</span> <span class="n">sig_zy_vy_el</span><span class="p">,</span>
                    <span class="n">weights</span><span class="p">)</span> <span class="o">=</span> <span class="n">el</span><span class="o">.</span><span class="n">element_stress</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">area</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">cx</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">cy</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">ixx_c</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">iyy_c</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">ixy_c</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">i11_c</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">i22_c</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">phi</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">j</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">omega</span><span class="p">[</span><span class="n">el</span><span class="o">.</span><span class="n">node_ids</span><span class="p">],</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">psi_shear</span><span class="p">[</span><span class="n">el</span><span class="o">.</span><span class="n">node_ids</span><span class="p">],</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">phi_shear</span><span class="p">[</span><span class="n">el</span><span class="o">.</span><span class="n">node_ids</span><span class="p">],</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">Delta_s</span><span class="p">)</span>

                <span class="c1"># add stresses to global vectors</span>
                <span class="n">stress_result</span><span class="o">.</span><span class="n">sig_zz_n</span><span class="p">[</span><span class="n">el</span><span class="o">.</span><span class="n">node_ids</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span>
                    <span class="n">N</span> <span class="o">*</span> <span class="n">sig_zz_n_el</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">weights</span><span class="p">)</span>
                <span class="n">stress_result</span><span class="o">.</span><span class="n">sig_zz_mxx</span><span class="p">[</span><span class="n">el</span><span class="o">.</span><span class="n">node_ids</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span>
                    <span class="n">Mxx</span> <span class="o">*</span> <span class="n">sig_zz_mxx_el</span> <span class="o">*</span> <span class="n">weights</span><span class="p">)</span>
                <span class="n">stress_result</span><span class="o">.</span><span class="n">sig_zz_myy</span><span class="p">[</span><span class="n">el</span><span class="o">.</span><span class="n">node_ids</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span>
                    <span class="n">Myy</span> <span class="o">*</span> <span class="n">sig_zz_myy_el</span> <span class="o">*</span> <span class="n">weights</span><span class="p">)</span>
                <span class="n">stress_result</span><span class="o">.</span><span class="n">sig_zz_m11</span><span class="p">[</span><span class="n">el</span><span class="o">.</span><span class="n">node_ids</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span>
                    <span class="n">M11</span> <span class="o">*</span> <span class="n">sig_zz_m11_el</span> <span class="o">*</span> <span class="n">weights</span><span class="p">)</span>
                <span class="n">stress_result</span><span class="o">.</span><span class="n">sig_zz_m22</span><span class="p">[</span><span class="n">el</span><span class="o">.</span><span class="n">node_ids</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span>
                    <span class="n">M22</span> <span class="o">*</span> <span class="n">sig_zz_m22_el</span> <span class="o">*</span> <span class="n">weights</span><span class="p">)</span>
                <span class="n">stress_result</span><span class="o">.</span><span class="n">sig_zx_mzz</span><span class="p">[</span><span class="n">el</span><span class="o">.</span><span class="n">node_ids</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span>
                    <span class="n">Mzz</span> <span class="o">*</span> <span class="n">sig_zx_mzz_el</span> <span class="o">*</span> <span class="n">weights</span><span class="p">)</span>
                <span class="n">stress_result</span><span class="o">.</span><span class="n">sig_zy_mzz</span><span class="p">[</span><span class="n">el</span><span class="o">.</span><span class="n">node_ids</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span>
                    <span class="n">Mzz</span> <span class="o">*</span> <span class="n">sig_zy_mzz_el</span> <span class="o">*</span> <span class="n">weights</span><span class="p">)</span>
                <span class="n">stress_result</span><span class="o">.</span><span class="n">sig_zx_vx</span><span class="p">[</span><span class="n">el</span><span class="o">.</span><span class="n">node_ids</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span>
                    <span class="n">Vx</span> <span class="o">*</span> <span class="n">sig_zx_vx_el</span> <span class="o">*</span> <span class="n">weights</span><span class="p">)</span>
                <span class="n">stress_result</span><span class="o">.</span><span class="n">sig_zy_vx</span><span class="p">[</span><span class="n">el</span><span class="o">.</span><span class="n">node_ids</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span>
                    <span class="n">Vx</span> <span class="o">*</span> <span class="n">sig_zy_vx_el</span> <span class="o">*</span> <span class="n">weights</span><span class="p">)</span>
                <span class="n">stress_result</span><span class="o">.</span><span class="n">sig_zx_vy</span><span class="p">[</span><span class="n">el</span><span class="o">.</span><span class="n">node_ids</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span>
                    <span class="n">Vy</span> <span class="o">*</span> <span class="n">sig_zx_vy_el</span> <span class="o">*</span> <span class="n">weights</span><span class="p">)</span>
                <span class="n">stress_result</span><span class="o">.</span><span class="n">sig_zy_vy</span><span class="p">[</span><span class="n">el</span><span class="o">.</span><span class="n">node_ids</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span>
                    <span class="n">Vy</span> <span class="o">*</span> <span class="n">sig_zy_vy_el</span> <span class="o">*</span> <span class="n">weights</span><span class="p">)</span>

                <span class="c1"># add nodal weights</span>
                <span class="n">nodal_weights</span><span class="p">[</span><span class="n">el</span><span class="o">.</span><span class="n">node_ids</span><span class="p">]</span> <span class="o">+=</span> <span class="n">weights</span>

            <span class="c1"># nodal averaging</span>
            <span class="n">stress_result</span><span class="o">.</span><span class="n">sig_zz_n</span> <span class="o">*=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">nodal_weights</span>
            <span class="n">stress_result</span><span class="o">.</span><span class="n">sig_zz_mxx</span> <span class="o">*=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">nodal_weights</span>
            <span class="n">stress_result</span><span class="o">.</span><span class="n">sig_zz_myy</span> <span class="o">*=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">nodal_weights</span>
            <span class="n">stress_result</span><span class="o">.</span><span class="n">sig_zz_m11</span> <span class="o">*=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">nodal_weights</span>
            <span class="n">stress_result</span><span class="o">.</span><span class="n">sig_zz_m22</span> <span class="o">*=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">nodal_weights</span>
            <span class="n">stress_result</span><span class="o">.</span><span class="n">sig_zx_mzz</span> <span class="o">*=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">nodal_weights</span>
            <span class="n">stress_result</span><span class="o">.</span><span class="n">sig_zy_mzz</span> <span class="o">*=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">nodal_weights</span>
            <span class="n">stress_result</span><span class="o">.</span><span class="n">sig_zx_vx</span> <span class="o">*=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">nodal_weights</span>
            <span class="n">stress_result</span><span class="o">.</span><span class="n">sig_zy_vx</span> <span class="o">*=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">nodal_weights</span>
            <span class="n">stress_result</span><span class="o">.</span><span class="n">sig_zx_vy</span> <span class="o">*=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">nodal_weights</span>
            <span class="n">stress_result</span><span class="o">.</span><span class="n">sig_zy_vy</span> <span class="o">*=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">nodal_weights</span>

            <span class="c1"># calculate combined stresses</span>
            <span class="n">stress_result</span><span class="o">.</span><span class="n">calculate_combined_stresses</span><span class="p">()</span>

            <span class="k">return</span> <span class="n">stress_result</span>

        <span class="k">if</span> <span class="n">time_info</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;--Calculating cross-section stresses...&quot;</span>
            <span class="n">stress_result</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">function_timer</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">calc_stress</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">stress_result</span> <span class="o">=</span> <span class="n">calc_stress</span><span class="p">()</span>

        <span class="c1"># return the stress result object</span>
        <span class="k">return</span> <span class="n">stress_result</span></div>

<div class="viewcode-block" id="CrossSection.assemble_torsion"><a class="viewcode-back" href="../../../rst/api.html#sectionproperties.analysis.cross_section.CrossSection.assemble_torsion">[docs]</a>    <span class="k">def</span> <span class="nf">assemble_torsion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Assembles stiffness matrices to be used for the computation of</span>
<span class="sd">        warping properties and the torsion load vector (f_torsion). Both a</span>
<span class="sd">        regular (k) and Lagrangian multiplier (k_lg) stiffness matrix are</span>
<span class="sd">        returned. The stiffness matrices are assembled using the sparse COO</span>
<span class="sd">        format and returned in the sparse CSC format.</span>

<span class="sd">        :return: Regular stiffness matrix, Lagrangian multiplier stiffness</span>
<span class="sd">            matrix and torsion load vector *(k, k_lg, f_torsion)*</span>
<span class="sd">        :rtype: tuple(:class:`scipy.sparse.csc_matrix`,</span>
<span class="sd">            :class:`scipy.sparse.csc_matrix`, :class:`numpy.ndarray`)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># initialise variables</span>
        <span class="n">N</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_nodes</span>  <span class="c1"># size of matrix</span>
        <span class="n">row</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># list holding row indices</span>
        <span class="n">col</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># list holding column indices</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># list holding stiffness matrix entries</span>
        <span class="n">f_torsion</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>  <span class="c1"># force vector array</span>

        <span class="c1"># loop through all elements in the mesh</span>
        <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">elements</span><span class="p">:</span>
            <span class="c1"># determine number of nodes in the current element</span>
            <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">el</span><span class="o">.</span><span class="n">node_ids</span><span class="p">)</span>

            <span class="c1"># calculate the element stiffness matrix and torsion load vector</span>
            <span class="p">(</span><span class="n">k_el</span><span class="p">,</span> <span class="n">f_el</span><span class="p">)</span> <span class="o">=</span> <span class="n">el</span><span class="o">.</span><span class="n">torsion_properties</span><span class="p">()</span>

            <span class="c1"># assemble the torsion load vector</span>
            <span class="n">f_torsion</span><span class="p">[</span><span class="n">el</span><span class="o">.</span><span class="n">node_ids</span><span class="p">]</span> <span class="o">+=</span> <span class="n">f_el</span>

            <span class="c1"># create row index vector</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">el</span><span class="o">.</span><span class="n">node_ids</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>

            <span class="c1"># create column index vector</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="n">el</span><span class="o">.</span><span class="n">node_ids</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>

            <span class="c1"># flatten element stiffness matrix</span>
            <span class="n">k</span> <span class="o">=</span> <span class="n">k_el</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>

            <span class="c1"># add to global arrays</span>
            <span class="n">row</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">row</span><span class="p">,</span> <span class="n">r</span><span class="p">))</span>
            <span class="n">col</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">col</span><span class="p">,</span> <span class="n">c</span><span class="p">))</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">data</span><span class="p">,</span> <span class="n">k</span><span class="p">))</span>

        <span class="n">k</span> <span class="o">=</span> <span class="n">coo_matrix</span><span class="p">((</span><span class="n">data</span><span class="p">,</span> <span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">)),</span> <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">N</span><span class="p">))</span>

        <span class="c1"># construct Lagrangian multiplier matrix:</span>
        <span class="c1"># column vector of ones</span>
        <span class="n">row</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">row</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)))</span>
        <span class="n">col</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">col</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">N</span><span class="p">)))</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">data</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">N</span><span class="p">)))</span>

        <span class="c1"># row vector of ones</span>
        <span class="n">row</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">row</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">N</span><span class="p">)))</span>
        <span class="n">col</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">col</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)))</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">data</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">N</span><span class="p">)))</span>

        <span class="c1"># zero in bottom right corner</span>
        <span class="n">row</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">row</span><span class="p">,</span> <span class="n">N</span><span class="p">))</span>
        <span class="n">col</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">col</span><span class="p">,</span> <span class="n">N</span><span class="p">))</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">data</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>

        <span class="n">k_lg</span> <span class="o">=</span> <span class="n">coo_matrix</span><span class="p">((</span><span class="n">data</span><span class="p">,</span> <span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">)),</span> <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">N</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">N</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">csc_matrix</span><span class="p">(</span><span class="n">k</span><span class="p">),</span> <span class="n">csc_matrix</span><span class="p">(</span><span class="n">k_lg</span><span class="p">),</span> <span class="n">f_torsion</span><span class="p">)</span></div>

<div class="viewcode-block" id="CrossSection.plot_mesh"><a class="viewcode-back" href="../../../rst/api.html#sectionproperties.analysis.cross_section.CrossSection.plot_mesh">[docs]</a>    <span class="k">def</span> <span class="nf">plot_mesh</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">pause</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Plots the finite element mesh. If no axes object is supplied a new</span>
<span class="sd">        figure and axis is created.</span>

<span class="sd">        :param ax: Axes object on which the mesh is plotted</span>
<span class="sd">        :type ax: :class:`matplotlib.axes.Axes`</span>
<span class="sd">        :param bool pause: If set to true, the figure pauses the script until</span>
<span class="sd">            the window is closed. If set to false, the script continues</span>
<span class="sd">            immediately after the window is rendered.</span>
<span class="sd">        :param float alpha: Transparency of the mesh: 0 &lt;= alpha &lt;= 1</span>
<span class="sd">        :param bool color: If set to true and material properties have been</span>
<span class="sd">            provided to the</span>
<span class="sd">            :class:`sectionproperties.analysis.cross_section.CrossSection` </span>
<span class="sd">            object, shades the elements with the specified material colours</span>

<span class="sd">        The following example plots the mesh generated for a 50D x 100W</span>
<span class="sd">        rectangle using a mesh size of 5::</span>

<span class="sd">            import sectionproperties.pre.sections as sections</span>
<span class="sd">            from sectionproperties.analysis.cross_section import CrossSection</span>

<span class="sd">            geometry = sections.RectangularSection(d=50, b=100)</span>
<span class="sd">            mesh = geometry.create_mesh(mesh_sizes=[5])</span>
<span class="sd">            section = CrossSection(geometry, mesh)</span>
<span class="sd">            section.plot_mesh()</span>

<span class="sd">        ..  figure:: ../images/rectangle_mesh.png</span>
<span class="sd">            :align: center</span>

<span class="sd">            Finite element mesh generated by the above example.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># if no axes object is supplied, create and setup the plot</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ax_supplied</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
            <span class="n">post</span><span class="o">.</span><span class="n">setup_plot</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">pause</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ax_supplied</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1"># TODO: implement colour shading</span>

        <span class="c1"># plot all the elements in the mesh</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">triplot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mesh_nodes</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">mesh_nodes</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span>
                   <span class="bp">self</span><span class="o">.</span><span class="n">mesh_elements</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">],</span> <span class="n">lw</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span>
                   <span class="n">alpha</span><span class="o">=</span><span class="n">alpha</span><span class="p">)</span>

        <span class="c1"># if no axes object is supplied, finish the plot</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ax_supplied</span><span class="p">:</span>
            <span class="n">post</span><span class="o">.</span><span class="n">finish_plot</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">pause</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Finite Element Mesh&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CrossSection.plot_centroids"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.CrossSection.plot_centroids">[docs]</a>    <span class="k">def</span> <span class="nf">plot_centroids</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pause</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Plots all the centroids and the shear centre, if they have been</span>
<span class="sd">        calculated, on top of the finite element mesh.</span>

<span class="sd">        :param bool pause: If set to true, the figure pauses the script until</span>
<span class="sd">            the window is closed. If set to false, the script continues</span>
<span class="sd">            immediately after the window is rendered.</span>

<span class="sd">        The following example analyses a 200 PFC section and displays a plot of</span>
<span class="sd">        the centroids::</span>

<span class="sd">            import sectionproperties.pre.sections as sections</span>
<span class="sd">            from sectionproperties.analysis.cross_section import CrossSection</span>

<span class="sd">            geometry = sections.PfcSection(d=200, b=75, t_f=12, t_w=6, r=12, n_r=8)</span>
<span class="sd">            mesh = geometry.create_mesh(mesh_sizes=[2.5])</span>

<span class="sd">            section = CrossSection(geometry, mesh)</span>
<span class="sd">            section.calculate_geometric_properties()</span>
<span class="sd">            section.calculate_warping_properties()</span>

<span class="sd">            section.plot_centroids()</span>

<span class="sd">        ..  figure:: ../images/pfc_centroids.png</span>
<span class="sd">            :align: center</span>
<span class="sd">            :scale: 75 %</span>

<span class="sd">            Plot of the elastic centroid and shear centre for the above example</span>
<span class="sd">            generated by</span>
<span class="sd">            :func:`~sectionproperties.analysis.cross_section.CrossSection.plot_centroids`</span>

<span class="sd">            # TODO: update example with plastic centroids</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># TODO: add plot principal axes</span>

        <span class="c1"># create plot and setup the plot</span>
        <span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
        <span class="n">post</span><span class="o">.</span><span class="n">setup_plot</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">pause</span><span class="p">)</span>

        <span class="c1"># plot the finite element mesh</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_mesh</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">pause</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

        <span class="c1"># if the elastic centroid has been calculated</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">cx</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">cx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">cy</span><span class="p">,</span>
                       <span class="n">edgecolors</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">facecolors</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                       <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Elastic centroid&#39;</span><span class="p">)</span>

        <span class="c1"># if the shear centre has been calculated</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">x_se</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="p">(</span><span class="n">x_s</span><span class="p">,</span> <span class="n">y_s</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_sc</span><span class="p">()</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x_s</span><span class="p">,</span> <span class="n">y_s</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                       <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Shear centre&#39;</span><span class="p">)</span>

        <span class="c1"># if the global plastic centroid has been calculated</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">x_pc</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">x_pc</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">y_pc</span><span class="p">,</span>
                       <span class="n">c</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                       <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Global plastic centroid&#39;</span><span class="p">)</span>

        <span class="c1"># if the principal plastic centroid has been calculated</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">x1_pc</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">x1_pc</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">y2_pc</span><span class="p">,</span>
                       <span class="n">edgecolors</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                       <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Principal plastic centroid&#39;</span><span class="p">)</span>

        <span class="c1"># display the legend</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;center left&#39;</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">))</span>

        <span class="c1"># finish the plot</span>
        <span class="n">post</span><span class="o">.</span><span class="n">finish_plot</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">pause</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Centroids&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CrossSection.display_mesh_info"><a class="viewcode-back" href="../../../rst/api.html#sectionproperties.analysis.cross_section.CrossSection.display_mesh_info">[docs]</a>    <span class="k">def</span> <span class="nf">display_mesh_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Prints mesh statistics (number of nodes, elements and regions) to</span>
<span class="sd">        the command window.</span>

<span class="sd">        The following example displays the mesh statistics for a Tee section</span>
<span class="sd">        merged from two rectangles::</span>

<span class="sd">            import sectionproperties.pre.sections as sections</span>
<span class="sd">            from sectionproperties.analysis.cross_section import CrossSection</span>

<span class="sd">            rec1 = sections.RectangularSection(d=100, b=25, shift=[-12.5, 0])</span>
<span class="sd">            rec2 = sections.RectangularSection(d=25, b=100, shift=[-50, 100])</span>
<span class="sd">            geometry = sections.MergedSection([rec1, rec2])</span>
<span class="sd">            mesh = geometry.create_mesh(mesh_sizes=[5, 2.5])</span>
<span class="sd">            section = CrossSection(geometry, mesh)</span>
<span class="sd">            section.display_mesh_info()</span>

<span class="sd">            &gt;&gt;&gt;Mesh Statistics:</span>
<span class="sd">            &gt;&gt;&gt;--4920 nodes</span>
<span class="sd">            &gt;&gt;&gt;--2365 elements</span>
<span class="sd">            &gt;&gt;&gt;--2 regions</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># TODO: add more statistics</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Mesh Statistics:&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--</span><span class="si">{0}</span><span class="s2"> nodes&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_nodes</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--</span><span class="si">{0}</span><span class="s2"> elements&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">elements</span><span class="p">)))</span>

        <span class="n">regions</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mesh_attributes</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;--</span><span class="si">{0}</span><span class="s2"> region&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">regions</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">regions</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot;s</span><span class="se">\n</span><span class="s2">&quot;</span>

        <span class="nb">print</span><span class="p">(</span><span class="n">text</span><span class="p">)</span></div>

<div class="viewcode-block" id="CrossSection.display_results"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.CrossSection.display_results">[docs]</a>    <span class="k">def</span> <span class="nf">display_results</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;8.6e&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Prints the results that have been calculated to the terminal.</span>

<span class="sd">        :param string fmt: String containing number formatting information</span>

<span class="sd">        The following example displays the geometric section properties for a</span>
<span class="sd">        100D x 50W rectangle with three digits after the decimal point::</span>

<span class="sd">            import sectionproperties.pre.sections as sections</span>
<span class="sd">            from sectionproperties.analysis.cross_section import CrossSection</span>

<span class="sd">            geometry = sections.RectangularSection(d=100, b=50)</span>
<span class="sd">            mesh = geometry.create_mesh(mesh_sizes=[5])</span>

<span class="sd">            section = CrossSection(geometry, mesh)</span>
<span class="sd">            section.calculate_geometric_properties()</span>

<span class="sd">            section.display_results(fmt=&#39;.3f&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">post</span><span class="o">.</span><span class="n">print_results</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fmt</span><span class="p">)</span></div>

    <span class="c1"># TODO: add new get methods when new section properties are added</span>
    <span class="c1"># e.g. plastic and composite</span>

<div class="viewcode-block" id="CrossSection.get_area"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.CrossSection.get_area">[docs]</a>    <span class="k">def</span> <span class="nf">get_area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: Cross-section area</span>
<span class="sd">        :rtype: float</span>

<span class="sd">        ::</span>

<span class="sd">            section = CrossSection(geometry, mesh)</span>
<span class="sd">            section.calculate_geometric_properties()</span>
<span class="sd">            area = section.get_area()</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">area</span></div>

<div class="viewcode-block" id="CrossSection.get_q"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.CrossSection.get_q">[docs]</a>    <span class="k">def</span> <span class="nf">get_q</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: First moments of area of the cross-section about the global</span>
<span class="sd">            axis *(qx, qy)*</span>
<span class="sd">        :rtype: tuple(float, float)</span>

<span class="sd">        ::</span>

<span class="sd">            section = CrossSection(geometry, mesh)</span>
<span class="sd">            section.calculate_geometric_properties()</span>
<span class="sd">            (qx, qy) = section.get_q()</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">qx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">qy</span><span class="p">)</span></div>

<div class="viewcode-block" id="CrossSection.get_ig"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.CrossSection.get_ig">[docs]</a>    <span class="k">def</span> <span class="nf">get_ig</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: Second moments of area of the cross-section about the global</span>
<span class="sd">            axis *(ixx_g, iyy_g, ixy_g)*</span>
<span class="sd">        :rtype: tuple(float, float, float)</span>

<span class="sd">        ::</span>

<span class="sd">            section = CrossSection(geometry, mesh)</span>
<span class="sd">            section.calculate_geometric_properties()</span>
<span class="sd">            (ixx_g, iyy_g, ixy_g) = section.get_ig()</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">ixx_g</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">iyy_g</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">ixy_g</span><span class="p">)</span></div>

<div class="viewcode-block" id="CrossSection.get_c"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.CrossSection.get_c">[docs]</a>    <span class="k">def</span> <span class="nf">get_c</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: Elastic centroid of the cross-section *(cx, cy)*</span>
<span class="sd">        :rtype: tuple(float, float)</span>

<span class="sd">        ::</span>

<span class="sd">            section = CrossSection(geometry, mesh)</span>
<span class="sd">            section.calculate_geometric_properties()</span>
<span class="sd">            (cx, cy) = section.get_elastic_centroid()</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">cx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">cy</span><span class="p">)</span></div>

<div class="viewcode-block" id="CrossSection.get_ic"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.CrossSection.get_ic">[docs]</a>    <span class="k">def</span> <span class="nf">get_ic</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: Second moments of area of the cross-section about the</span>
<span class="sd">            centroidal axis *(ixx_c, iyy_c, ixy_c)*</span>
<span class="sd">        :rtype: tuple(float, float, float)</span>

<span class="sd">        ::</span>

<span class="sd">            section = CrossSection(geometry, mesh)</span>
<span class="sd">            section.calculate_geometric_properties()</span>
<span class="sd">            (ixx_c, iyy_c, ixy_c) = section.get_ic()</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">ixx_c</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">iyy_c</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">ixy_c</span><span class="p">)</span></div>

<div class="viewcode-block" id="CrossSection.get_z"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.CrossSection.get_z">[docs]</a>    <span class="k">def</span> <span class="nf">get_z</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: Section moduli about the centroidal axis *(zxx_plus,</span>
<span class="sd">            zxx_minus, zyy_plus, zyy_minus)*</span>
<span class="sd">        :rtype: tuple(float, float, float, float)</span>

<span class="sd">        ::</span>

<span class="sd">            section = CrossSection(geometry, mesh)</span>
<span class="sd">            section.calculate_geometric_properties()</span>
<span class="sd">            (zxx_plus, zxx_minus, zyy_plus, zyy_minus) = section.get_z()</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">zxx_plus</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">zxx_minus</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">zyy_plus</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">zyy_minus</span><span class="p">)</span></div>

<div class="viewcode-block" id="CrossSection.get_rc"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.CrossSection.get_rc">[docs]</a>    <span class="k">def</span> <span class="nf">get_rc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: Radii of gyration about the centroidal x-axis *(rx, ry)*</span>
<span class="sd">        :rtype: tuple(float, float)</span>

<span class="sd">        ::</span>

<span class="sd">            section = CrossSection(geometry, mesh)</span>
<span class="sd">            section.calculate_geometric_properties()</span>
<span class="sd">            (rx, ry) = section.get_rc()</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">rx_c</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">ry_c</span><span class="p">)</span></div>

<div class="viewcode-block" id="CrossSection.get_ip"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.CrossSection.get_ip">[docs]</a>    <span class="k">def</span> <span class="nf">get_ip</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: Second moments of area of the cross-section about the</span>
<span class="sd">            principal axis *(i11_c, i22_c)*</span>
<span class="sd">        :rtype: tuple(float, float)</span>

<span class="sd">        ::</span>

<span class="sd">            section = CrossSection(geometry, mesh)</span>
<span class="sd">            section.calculate_geometric_properties()</span>
<span class="sd">            (i11_c, i22_c) = section.get_ip()</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">i11_c</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">i22_c</span><span class="p">)</span></div>

<div class="viewcode-block" id="CrossSection.get_phi"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.CrossSection.get_phi">[docs]</a>    <span class="k">def</span> <span class="nf">get_phi</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: Principal bending axis angle</span>
<span class="sd">        :rtype: float</span>

<span class="sd">        ::</span>

<span class="sd">            section = CrossSection(geometry, mesh)</span>
<span class="sd">            section.calculate_geometric_properties()</span>
<span class="sd">            phi = section.get_phi()</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">phi</span></div>

<div class="viewcode-block" id="CrossSection.get_zp"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.CrossSection.get_zp">[docs]</a>    <span class="k">def</span> <span class="nf">get_zp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: Section moduli about the principal axis *(z11_plus,</span>
<span class="sd">            z11_minus, z22_plus, z22_minus)*</span>
<span class="sd">        :rtype: tuple(float, float, float, float)</span>

<span class="sd">        ::</span>

<span class="sd">            section = CrossSection(geometry, mesh)</span>
<span class="sd">            section.calculate_geometric_properties()</span>
<span class="sd">            (z11_plus, z11_minus, z22_plus, z22_minus) = section.get_zp()</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">z11_plus</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">z11_minus</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">z22_plus</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">z22_minus</span><span class="p">)</span></div>

<div class="viewcode-block" id="CrossSection.get_rp"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.CrossSection.get_rp">[docs]</a>    <span class="k">def</span> <span class="nf">get_rp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: Radii of gyration about the principal axis *(r11, r22)*</span>
<span class="sd">        :rtype: tuple(float, float)</span>

<span class="sd">        ::</span>

<span class="sd">            section = CrossSection(geometry, mesh)</span>
<span class="sd">            section.calculate_geometric_properties()</span>
<span class="sd">            (r11, r22) = section.get_rp()</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">r11_c</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">r22_c</span><span class="p">)</span></div>

<div class="viewcode-block" id="CrossSection.get_j"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.CrossSection.get_j">[docs]</a>    <span class="k">def</span> <span class="nf">get_j</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: Torsion constant</span>
<span class="sd">        :rtype: float</span>

<span class="sd">        ::</span>

<span class="sd">            section = CrossSection(geometry, mesh)</span>
<span class="sd">            section.calculate_geometric_properties()</span>
<span class="sd">            section.calculate_warping_properties()</span>
<span class="sd">            j = section.get_j()</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">j</span></div>

<div class="viewcode-block" id="CrossSection.get_sc"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.CrossSection.get_sc">[docs]</a>    <span class="k">def</span> <span class="nf">get_sc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: Shear centre (elasticity approach) *(x_se, y_se)*</span>
<span class="sd">        :rtype: tuple(float, float)</span>

<span class="sd">        ::</span>

<span class="sd">            section = CrossSection(geometry, mesh)</span>
<span class="sd">            section.calculate_geometric_properties()</span>
<span class="sd">            section.calculate_warping_properties()</span>
<span class="sd">            (x_se, y_se) = section.get_sc()</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">x_se</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># add centroid location to move section back to original location</span>
            <span class="n">x_se</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">x_se</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">cx</span>
            <span class="n">y_se</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">y_se</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">cy</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">x_se</span><span class="p">,</span> <span class="n">y_se</span><span class="p">)</span></div>

<div class="viewcode-block" id="CrossSection.get_sc_p"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.CrossSection.get_sc_p">[docs]</a>    <span class="k">def</span> <span class="nf">get_sc_p</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: Principal axis shear centre (elasticity approach)</span>
<span class="sd">            *(x1_se, y2_se)*</span>
<span class="sd">        :rtype: tuple(float, float)</span>

<span class="sd">        ::</span>

<span class="sd">            section = CrossSection(geometry, mesh)</span>
<span class="sd">            section.calculate_geometric_properties()</span>
<span class="sd">            section.calculate_warping_properties()</span>
<span class="sd">            (x1_se, y2_se) = section.get_sc_p()</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">x1_se</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># add centroid location to move section back to original location</span>
            <span class="n">x1_se</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">x1_se</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">cx</span>
            <span class="n">y2_se</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">y2_se</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">cy</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">x1_se</span><span class="p">,</span> <span class="n">y2_se</span><span class="p">)</span></div>

<div class="viewcode-block" id="CrossSection.get_sc_t"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.CrossSection.get_sc_t">[docs]</a>    <span class="k">def</span> <span class="nf">get_sc_t</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: Shear centre (Trefftz&#39;s approach) *(x_st, y_st)*</span>
<span class="sd">        :rtype: tuple(float, float)</span>

<span class="sd">        ::</span>

<span class="sd">            section = CrossSection(geometry, mesh)</span>
<span class="sd">            section.calculate_geometric_properties()</span>
<span class="sd">            section.calculate_warping_properties()</span>
<span class="sd">            (x_st, y_st) = section.get_sc_t()</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">x_st</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># add centroid location to move section back to original location</span>
            <span class="n">x_st</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">x_st</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">cx</span>
            <span class="n">y_st</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">y_st</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">cy</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">x_st</span><span class="p">,</span> <span class="n">y_st</span><span class="p">)</span></div>

<div class="viewcode-block" id="CrossSection.get_gamma"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.CrossSection.get_gamma">[docs]</a>    <span class="k">def</span> <span class="nf">get_gamma</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: Warping constant</span>
<span class="sd">        :rtype: float</span>

<span class="sd">        ::</span>

<span class="sd">            section = CrossSection(geometry, mesh)</span>
<span class="sd">            section.calculate_geometric_properties()</span>
<span class="sd">            section.calculate_warping_properties()</span>
<span class="sd">            gamma = section.get_gamma()</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">gamma</span></div>

<div class="viewcode-block" id="CrossSection.get_As"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.CrossSection.get_As">[docs]</a>    <span class="k">def</span> <span class="nf">get_As</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: Shear areas *(A_sx, A_sy)*</span>
<span class="sd">        :rtype: tuple(float, float)</span>

<span class="sd">        ::</span>

<span class="sd">            section = CrossSection(geometry, mesh)</span>
<span class="sd">            section.calculate_geometric_properties()</span>
<span class="sd">            section.calculate_warping_properties()</span>
<span class="sd">            (A_sx, A_sy) = section.get_As()</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">A_sx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">A_sy</span><span class="p">)</span></div>

<div class="viewcode-block" id="CrossSection.get_As_p"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.CrossSection.get_As_p">[docs]</a>    <span class="k">def</span> <span class="nf">get_As_p</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: Shear areas about the principal bending axis *(A_s11, A_s22)*</span>
<span class="sd">        :rtype: tuple(float, float)</span>

<span class="sd">        ::</span>

<span class="sd">            section = CrossSection(geometry, mesh)</span>
<span class="sd">            section.calculate_geometric_properties()</span>
<span class="sd">            section.calculate_warping_properties()</span>
<span class="sd">            (A_s11, A_s22) = section.get_As_p()</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">A_s11</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">section_props</span><span class="o">.</span><span class="n">A_s22</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="SectionProperties"><a class="viewcode-back" href="../../../rst/api.html#sectionproperties.analysis.cross_section.SectionProperties">[docs]</a><span class="k">class</span> <span class="nc">SectionProperties</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Class for storing section properties.</span>

<span class="sd">    Stores calculated section properties. Also provides methods to calculate</span>
<span class="sd">    section properties entirely derived from other section properties.</span>

<span class="sd">    # TODO: add new section properties for composite</span>

<span class="sd">    :cvar float area: Cross-sectional area</span>
<span class="sd">    :cvar float qx: First moment of area about the x-axis</span>
<span class="sd">    :cvar float qy: First moment of area about the y-axis</span>
<span class="sd">    :cvar float ixx_g: Second moment of area about the global x-axis</span>
<span class="sd">    :cvar float iyy_g: Second moment of area about the global y-axis</span>
<span class="sd">    :cvar float ixy_g: Second moment of area about the global xy-axis</span>
<span class="sd">    :cvar float cx: X coordinate of the elastic centroid</span>
<span class="sd">    :cvar float cy: Y coordinate of the elastic centroid</span>
<span class="sd">    :cvar float ixx_c: Second moment of area about the centroidal x-axis</span>
<span class="sd">    :cvar float iyy_c: Second moment of area about the centroidal y-axis</span>
<span class="sd">    :cvar float ixy_c: Second moment of area about the centroidal xy-axis</span>
<span class="sd">    :cvar float zxx_plus: Section modulus about the centroidal x-axis for</span>
<span class="sd">        stresses at the positive extreme value of y</span>
<span class="sd">    :cvar float zxx_minus: Section modulus about the centroidal x-axis for</span>
<span class="sd">        stresses at the negative extreme value of y</span>
<span class="sd">    :cvar float zyy_plus: Section modulus about the centroidal y-axis for</span>
<span class="sd">        stresses at the positive extreme value of x</span>
<span class="sd">    :cvar float zyy_minus: Section modulus about the centroidal y-axis for</span>
<span class="sd">        stresses at the negative extreme value of x</span>
<span class="sd">    :cvar float rx_c: Radius of gyration about the centroidal x-axis.</span>
<span class="sd">    :cvar float ry_c: Radius of gyration about the centroidal y-axis.</span>
<span class="sd">    :cvar float i11_c: Second moment of area about the centroidal 11-axis</span>
<span class="sd">    :cvar float i22_c: Second moment of area about the centroidal 22-axis</span>
<span class="sd">    :cvar float phi: Principal axis angle</span>
<span class="sd">    :cvar float z11_plus: Section modulus about the principal 11-axis for</span>
<span class="sd">        stresses at the positive extreme value of the 22-axis</span>
<span class="sd">    :cvar float z11_minus: Section modulus about the principal 11-axis for</span>
<span class="sd">        stresses at the negative extreme value of the 22-axis</span>
<span class="sd">    :cvar float z22_plus: Section modulus about the principal 22-axis for</span>
<span class="sd">        stresses at the positive extreme value of the 11-axis</span>
<span class="sd">    :cvar float z22_minus: Section modulus about the principal 22-axis for</span>
<span class="sd">        stresses at the negative extreme value of the 11-axis</span>
<span class="sd">    :cvar float r11_c: Radius of gyration about the principal 11-axis.</span>
<span class="sd">    :cvar float r22_c: Radius of gyration about the principal 22-axis.</span>
<span class="sd">    :cvar float xmax: Maximum x-axis coordinate</span>
<span class="sd">    :cvar float xmin: Minimum x-axis coordinate</span>
<span class="sd">    :cvar float ymax: Maximum y-axis coordinate</span>
<span class="sd">    :cvar float ymin: Minimum y-axis coordinate</span>
<span class="sd">    :cvar float x1max: Maximum 11-axis coordinate</span>
<span class="sd">    :cvar float x1min: Minimum 11-axis coordinate</span>
<span class="sd">    :cvar float y2max: Maximum 22-axis coordinate</span>
<span class="sd">    :cvar float y2min: Minimum 22-axis coordinate</span>
<span class="sd">    :cvar float j: Torsion constant</span>
<span class="sd">    :cvar omega: Warping function</span>
<span class="sd">    :vartype omega: :class:`numpy.ndarray`</span>
<span class="sd">    :cvar psi_shear: Psi shear function</span>
<span class="sd">    :vartype psi_shear: :class:`numpy.ndarray`</span>
<span class="sd">    :cvar phi_shear: Phi shear function</span>
<span class="sd">    :vartype phi_shear: :class:`numpy.ndarray`</span>
<span class="sd">    :cvar float Delta_s: Shear factor</span>
<span class="sd">    :cvar float x_se: X coordinate of the shear centre (elasticity approach)</span>
<span class="sd">    :cvar float y_se: Y coordinate of the shear centre (elasticity approach)</span>
<span class="sd">    :cvar float x1_se: 11 coordinate of the shear centre (elasticity approach)</span>
<span class="sd">    :cvar float y2_se: 22 coordinate of the shear centre (elasticity approach)</span>
<span class="sd">    :cvar float x_st: X coordinate of the shear centre (Trefftz&#39;s approach)</span>
<span class="sd">    :cvar float y_st: Y coordinate of the shear centre (Trefftz&#39;s approach)</span>
<span class="sd">    :cvar float gamma: Warping constant</span>
<span class="sd">    :cvar float A_sx: Shear area about the x-axis</span>
<span class="sd">    :cvar float A_sy: Shear area about the y-axis</span>
<span class="sd">    :cvar float A_sxy: Shear area about the xy-axis</span>
<span class="sd">    :cvar float A_s11: Shear area about the 11 bending axis</span>
<span class="sd">    :cvar float A_s22: Shear area about the 22 bending axis</span>
<span class="sd">    :cvar float x_pc: X coordinate of the global plastic centroid</span>
<span class="sd">    :cvar float y_pc: Y coordinate of the global plastic centroid</span>
<span class="sd">    :cvar float x1_pc: 11 coordinate of the principal plastic centroid</span>
<span class="sd">    :cvar float y2_pc: 22 coordinate of the principal plastic centroid</span>
<span class="sd">    :cvar float Sxx: Plastic section modulus about the centroidal x-axis</span>
<span class="sd">    :cvar float Syy: Plastic section modulus about the centroidal y-axis</span>
<span class="sd">    :cvar float SF_xx_plus: Shape factor for bending about the x-axis with</span>
<span class="sd">        respect to the top fibre</span>
<span class="sd">    :cvar float SF_xx_minus: Shape factor for bending about the x-axis with</span>
<span class="sd">        respect to the bottom fibre</span>
<span class="sd">    :cvar float SF_yy_plus: Shape factor for bending about the y-axis with</span>
<span class="sd">        respect to the top fibre</span>
<span class="sd">    :cvar float SF_yy_minus: Shape factor for bending about the y-axis with</span>
<span class="sd">        respect to the bottom fibre</span>
<span class="sd">    :cvar float S11: Plastic section modulus about the 11-axis</span>
<span class="sd">    :cvar float S22: Plastic section modulus about the 22-axis</span>
<span class="sd">    :cvar float SF_11_plus: Shape factor for bending about the 11-axis with</span>
<span class="sd">        respect to the top fibre</span>
<span class="sd">    :cvar float SF_11_minus: Shape factor for bending about the 11-axis with</span>
<span class="sd">        respect to the bottom fibre</span>
<span class="sd">    :cvar float SF_22_plus: Shape factor for bending about the 22-axis with</span>
<span class="sd">        respect to the top fibre</span>
<span class="sd">    :cvar float SF_22_minus: Shape factor for bending about the 22-axis with</span>
<span class="sd">        respect to the bottom fibre</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Inits the SectionProperties class.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">area</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qx</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qy</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ixx_g</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iyy_g</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ixy_g</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cx</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cy</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ixx_c</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iyy_c</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ixy_c</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zxx_plus</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zxx_minus</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zyy_plus</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zyy_minus</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rx_c</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ry_c</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">i11_c</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">i22_c</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">phi</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">z11_plus</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">z11_minus</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">z22_plus</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">z22_minus</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">r11_c</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">r22_c</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">j</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">omega</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">psi_shear</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">phi_shear</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Delta_s</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x_se</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y_se</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x1_se</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y2_se</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x_st</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y_st</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">A_sx</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">A_sy</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">A_sxy</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">A_s11</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">A_s22</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x_pc</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y_pc</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x1_pc</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y2_pc</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Sxx</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Syy</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SF_xx_plus</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SF_xx_minus</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SF_yy_plus</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SF_yy_minus</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">S11</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">S22</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SF_11_plus</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SF_11_minus</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SF_22_plus</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SF_22_minus</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="SectionProperties.calculate_elastic_centroid"><a class="viewcode-back" href="../../../rst/api.html#sectionproperties.analysis.cross_section.SectionProperties.calculate_elastic_centroid">[docs]</a>    <span class="k">def</span> <span class="nf">calculate_elastic_centroid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Calculates the elastic centroid based on the cross-section area and</span>
<span class="sd">        first moments of area.</span>

<span class="sd">        :return: Tuple containing the coordinates of the elastic centroid.</span>
<span class="sd">        :rtype: tuple(float, float)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># TODO: adjust for material properties!</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">qy</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">area</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">qx</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">area</span>

        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cy</span><span class="p">)</span></div>

<div class="viewcode-block" id="SectionProperties.calculate_centroidal_properties"><a class="viewcode-back" href="../../../rst/api.html#sectionproperties.analysis.cross_section.SectionProperties.calculate_centroidal_properties">[docs]</a>    <span class="k">def</span> <span class="nf">calculate_centroidal_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mesh</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Calculates the geometric section properties about the centroidal and</span>
<span class="sd">        principal axes based on the results about the global axis.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># TODO: adjust for material properties!</span>

        <span class="c1"># calculate second moments of area about the centroidal xy axis</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ixx_c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ixx_g</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">qx</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">area</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iyy_c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">iyy_g</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">qy</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">area</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ixy_c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ixy_g</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">qx</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">qy</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">area</span>

        <span class="c1"># calculate section moduli about the centroidal xy axis</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">mesh</span><span class="o">.</span><span class="n">points</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xmax</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xmin</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ymax</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ymin</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zxx_plus</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ixx_c</span> <span class="o">/</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ymax</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">cy</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zxx_minus</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ixx_c</span> <span class="o">/</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ymin</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">cy</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zyy_plus</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">iyy_c</span> <span class="o">/</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xmax</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zyy_minus</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">iyy_c</span> <span class="o">/</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xmin</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="p">)</span>

        <span class="c1"># calculate radii of gyration about centroidal xy axis</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rx_c</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ixx_c</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">area</span><span class="p">)</span> <span class="o">**</span> <span class="mf">0.5</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ry_c</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iyy_c</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">area</span><span class="p">)</span> <span class="o">**</span> <span class="mf">0.5</span>

        <span class="c1"># calculate prinicpal 2nd moments of area about the centroidal xy axis</span>
        <span class="n">Delta</span> <span class="o">=</span> <span class="p">(((</span><span class="bp">self</span><span class="o">.</span><span class="n">ixx_c</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">iyy_c</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ixy_c</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mf">0.5</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">i11_c</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ixx_c</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">iyy_c</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">Delta</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">i22_c</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ixx_c</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">iyy_c</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">Delta</span>

        <span class="c1"># calculate initial principal axis angle</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ixx_c</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">i11_c</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-12</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">i11_c</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">phi</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">phi</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan2</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ixx_c</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">i11_c</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ixy_c</span><span class="p">)</span> <span class="o">*</span> <span class="mi">180</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span>

        <span class="c1"># calculate section moduli about the principal axis</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">pt</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">nodes</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">pt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">cx</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">pt</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">cy</span>
            <span class="c1"># determine the coordinate of the point wrt the principal axis</span>
            <span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span> <span class="o">=</span> <span class="n">fea</span><span class="o">.</span><span class="n">principal_coordinate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">phi</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

            <span class="c1"># initialise min, max variables</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">x1max</span> <span class="o">=</span> <span class="n">x1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">x1min</span> <span class="o">=</span> <span class="n">x1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">y2max</span> <span class="o">=</span> <span class="n">y2</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">y2min</span> <span class="o">=</span> <span class="n">y2</span>

            <span class="c1"># update the mins and maxs where necessary</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x1max</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x1max</span><span class="p">,</span> <span class="n">x1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x1min</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x1min</span><span class="p">,</span> <span class="n">x1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y2max</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y2max</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y2min</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y2min</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span>

        <span class="c1"># evaluate principal section moduli</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">z11_plus</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">i11_c</span> <span class="o">/</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y2max</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">z11_minus</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">i11_c</span> <span class="o">/</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y2min</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">z22_plus</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">i22_c</span> <span class="o">/</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x1max</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">z22_minus</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">i22_c</span> <span class="o">/</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x1min</span><span class="p">)</span>

        <span class="c1"># calculate radii of gyration about centroidal principal axis</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">r11_c</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">i11_c</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">area</span><span class="p">)</span> <span class="o">**</span> <span class="mf">0.5</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">r22_c</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">i22_c</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">area</span><span class="p">)</span> <span class="o">**</span> <span class="mf">0.5</span></div></div>


<span class="k">class</span> <span class="nc">PlasticSection</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;asldj TODO!!!</span>

<span class="sd">    asdlkjasd</span>

<span class="sd">    :param geometry: Cross-section geometry object</span>
<span class="sd">    :type geometry: :class:`~sectionproperties.pre.sections.Geometry`</span>

<span class="sd">    :cvar geometry: Cross-section geometry object</span>
<span class="sd">    :vartype geometry: :class:`~sectionproperties.pre.sections.Geometry`</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">geometry</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Inits the PlasticSection class.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">geometry</span> <span class="o">=</span> <span class="n">geometry</span>

    <span class="k">def</span> <span class="nf">calculate_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;a&quot;&quot;&quot;</span>

        <span class="c1"># unit vectors in the axis directions</span>
        <span class="n">ux</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">angle</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">angle</span><span class="p">)]</span>
        <span class="n">uy</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">angle</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">angle</span><span class="p">)]</span>

        <span class="c1"># calculate x-axis plastic centroid</span>
        <span class="c1"># implement</span>

        <span class="c1"># calculate y-axis plastic centroid</span>
        <span class="c1"># implement</span>

        <span class="c1"># think about SFs and S for different materials</span>

    <span class="c1"># ELEMENT METHODS:</span>
        <span class="c1"># is element above axis or below axis?</span>
        <span class="c1"># return element force</span>

    <span class="c1"># CLASS METHODS:</span>
        <span class="c1"># calculate plastic force</span>
        <span class="c1"># calculate area centroids</span>
        <span class="c1"># meshing methods</span>
        <span class="c1"># pc algorithm</span>

<span class="c1"># TODO: think about how to do stresses for composite! don&#39;t average across</span>
<span class="c1"># different properties!</span>


<div class="viewcode-block" id="StressResult"><a class="viewcode-back" href="../../../rst/api.html#sectionproperties.analysis.cross_section.StressResult">[docs]</a><span class="k">class</span> <span class="nc">StressResult</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Class for storing a stress result.</span>

<span class="sd">    Provides a way to store the results from a cross-section stress analysis.</span>
<span class="sd">    Also provides methods to calculate combined stresses and post-process the</span>
<span class="sd">    stress results.</span>

<span class="sd">    :param cross_section: CrossSection object that the stress analysis was</span>
<span class="sd">        performed on</span>
<span class="sd">    :type cross_section:</span>
<span class="sd">        :class:`~sectionproperties.analysis.cross_section.CrossSection`</span>
<span class="sd">    :param int num_nodes: Number of nodes in the finite element mesh</span>

<span class="sd">    :cvar cross_section: CrossSection object that the stress analysis was</span>
<span class="sd">        performed on</span>
<span class="sd">    :vartype cross_section:</span>
<span class="sd">        :class:`~sectionproperties.analysis.cross_section.CrossSection`</span>
<span class="sd">    :cvar sig_zz_n: Normal stress (:math:`\sigma_{zz,N}`) resulting from</span>
<span class="sd">        an axial force</span>
<span class="sd">    :vartype sig_zz_n: :class:`numpy.ndarray`</span>
<span class="sd">    :cvar sig_zz_mxx: Normal stress (:math:`\sigma_{zz,Mxx}`) resulting from</span>
<span class="sd">        a bending moment about the xx-axis</span>
<span class="sd">    :vartype sig_zz_mxx: :class:`numpy.ndarray`</span>
<span class="sd">    :cvar sig_zz_myy: Normal stress (:math:`\sigma_{zz,Myy}`) resulting from</span>
<span class="sd">        a bending moment about the yy-axis</span>
<span class="sd">    :vartype sig_zz_myy: :class:`numpy.ndarray`</span>
<span class="sd">    :cvar sig_zz_m11: Normal stress (:math:`\sigma_{zz,M11}`) resulting from</span>
<span class="sd">        a bending moment about the 11-axis</span>
<span class="sd">    :vartype sig_zz_m11: :class:`numpy.ndarray`</span>
<span class="sd">    :cvar sig_zz_m22: Normal stress (:math:`\sigma_{zz,M22}`) resulting from</span>
<span class="sd">        a bending moment about the 22-axis</span>
<span class="sd">    :vartype sig_zz_m22: :class:`numpy.ndarray`</span>
<span class="sd">    :cvar sig_zx_mzz: Shear stress (:math:`\sigma_{zx,Mzz}`) resulting from</span>
<span class="sd">        a torsion moment about the zz-axis</span>
<span class="sd">    :vartype sig_zx_mzz: :class:`numpy.ndarray`</span>
<span class="sd">    :cvar sig_zy_mzz: Shear stress (:math:`\sigma_{zy,Mzz}`) resulting from</span>
<span class="sd">        a torsion moment about the zz-axis</span>
<span class="sd">    :vartype sig_zy_mzz: :class:`numpy.ndarray`</span>
<span class="sd">    :cvar sig_zx_vx: Shear stress (:math:`\sigma_{zx,Vx}`) resulting from</span>
<span class="sd">        a shear force in the x-direction</span>
<span class="sd">    :vartype sig_zx_vx: :class:`numpy.ndarray`</span>
<span class="sd">    :cvar sig_zy_vx: Shear stress (:math:`\sigma_{zy,Vx}`) resulting from</span>
<span class="sd">        a shear force in the x-direction</span>
<span class="sd">    :vartype sig_zy_vx: :class:`numpy.ndarray`</span>
<span class="sd">    :cvar sig_zx_vy: Shear stress (:math:`\sigma_{zx,Vy}`) resulting from</span>
<span class="sd">        a shear force in the y-direction</span>
<span class="sd">    :vartype sig_zx_vy: :class:`numpy.ndarray`</span>
<span class="sd">    :cvar sig_zy_vy: Shear stress (:math:`\sigma_{zy,Vy}`) resulting from</span>
<span class="sd">        a shear force in the y-direction</span>
<span class="sd">    :vartype sig_zy_vy: :class:`numpy.ndarray`</span>
<span class="sd">    :cvar sig_zz_m: Normal stress (:math:`\sigma_{zz,\Sigma M}`) resulting from</span>
<span class="sd">        all applied bending moments</span>
<span class="sd">    :vartype sig_zz_m: :class:`numpy.ndarray`</span>
<span class="sd">    :cvar sig_zxy_mzz: Resultant shear stress (:math:`\sigma_{zxy,Mzz}`)</span>
<span class="sd">        resulting from a torsion moment in the zz-direction</span>
<span class="sd">    :vartype sig_zxy_mzz: :class:`numpy.ndarray`</span>
<span class="sd">    :cvar sig_zxy_vx: Resultant shear stress (:math:`\sigma_{zxy,Vx}`)</span>
<span class="sd">        resulting from a a shear force in the x-direction</span>
<span class="sd">    :vartype sig_zxy_vx: :class:`numpy.ndarray`</span>
<span class="sd">    :cvar sig_zxy_vy: Resultant shear stress (:math:`\sigma_{zxy,Vy}`)</span>
<span class="sd">        resulting from a a shear force in the y-direction</span>
<span class="sd">    :vartype sig_zxy_vy: :class:`numpy.ndarray`</span>
<span class="sd">    :cvar sig_zx_v: Shear stress (:math:`\sigma_{zx,\Sigma V}`) resulting from</span>
<span class="sd">        all applied shear forces</span>
<span class="sd">    :vartype sig_zx_v: :class:`numpy.ndarray`</span>
<span class="sd">    :cvar sig_zy_v: Shear stress (:math:`\sigma_{zy,\Sigma V}`) resulting from</span>
<span class="sd">        all applied shear forces</span>
<span class="sd">    :vartype sig_zy_v: :class:`numpy.ndarray`</span>
<span class="sd">    :cvar sig_zxy_v: Resultant shear stress (:math:`\sigma_{zxy,\Sigma V}`)</span>
<span class="sd">        resulting from all applied shear forces</span>
<span class="sd">    :vartype sig_zxy_v: :class:`numpy.ndarray`</span>
<span class="sd">    :cvar sig_zz: Combined normal force (:math:`\sigma_{zz}`) resulting from</span>
<span class="sd">        all applied actions</span>
<span class="sd">    :vartype sig_zz: :class:`numpy.ndarray`</span>
<span class="sd">    :cvar sig_zx: Combined shear stress (:math:`\sigma_{zx}`) resulting from</span>
<span class="sd">        all applied actions</span>
<span class="sd">    :vartype sig_zx: :class:`numpy.ndarray`</span>
<span class="sd">    :cvar sig_zy: Combined shear stress (:math:`\sigma_{zy}`) resulting from</span>
<span class="sd">        all applied actions</span>
<span class="sd">    :vartype sig_zy: :class:`numpy.ndarray`</span>
<span class="sd">    :cvar sig_zxy: Combined resultant shear stress (:math:`\sigma_{zxy}`)</span>
<span class="sd">        resulting from all applied actions</span>
<span class="sd">    :vartype sig_zxy: :class:`numpy.ndarray`</span>
<span class="sd">    :cvar sig_vm: von Mises stress (:math:`\sigma_{VM}`) resulting from</span>
<span class="sd">        all applied actions</span>
<span class="sd">    :vartype sig_vm: :class:`numpy.ndarray`</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cross_section</span><span class="p">,</span> <span class="n">num_nodes</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Inits the StressResult class.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cross_section</span> <span class="o">=</span> <span class="n">cross_section</span>

        <span class="c1"># allocate stresses arising directly from actions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_zz_n</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">num_nodes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_zz_mxx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">num_nodes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_zz_myy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">num_nodes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_zz_m11</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">num_nodes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_zz_m22</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">num_nodes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_zx_mzz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">num_nodes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_zy_mzz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">num_nodes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_zx_vx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">num_nodes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_zy_vx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">num_nodes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_zx_vy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">num_nodes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_zy_vy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">num_nodes</span><span class="p">)</span>

        <span class="c1"># allocate combined stresses</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_zz_m</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">num_nodes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_zxy_mzz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">num_nodes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_zxy_vx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">num_nodes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_zxy_vy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">num_nodes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_zx_v</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">num_nodes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_zy_v</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">num_nodes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_zxy_v</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">num_nodes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_zz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">num_nodes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_zx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">num_nodes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_zy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">num_nodes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_zxy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">num_nodes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_vm</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">num_nodes</span><span class="p">)</span>

<div class="viewcode-block" id="StressResult.calculate_combined_stresses"><a class="viewcode-back" href="../../../rst/api.html#sectionproperties.analysis.cross_section.StressResult.calculate_combined_stresses">[docs]</a>    <span class="k">def</span> <span class="nf">calculate_combined_stresses</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Calculates the combined cross-section stresses.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">sig_zz_m</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_zz_mxx</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">sig_zz_myy</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">sig_zz_m11</span> <span class="o">+</span>
                         <span class="bp">self</span><span class="o">.</span><span class="n">sig_zz_m22</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_zxy_mzz</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_zx_mzz</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">sig_zy_mzz</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mf">0.5</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_zxy_vx</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_zx_vx</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">sig_zy_vx</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mf">0.5</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_zxy_vy</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_zx_vy</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">sig_zy_vy</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mf">0.5</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_zx_v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sig_zx_vx</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">sig_zx_vy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_zy_v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sig_zy_vx</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">sig_zy_vy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_zxy_v</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_zx_v</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">sig_zy_v</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mf">0.5</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_zz</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sig_zz_n</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">sig_zz_m</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_zx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sig_zx_mzz</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">sig_zx_v</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_zy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sig_zy_mzz</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">sig_zy_v</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_zxy</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_zx</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">sig_zy</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mf">0.5</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_vm</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_zz</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">sig_zxy</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mf">0.5</span></div>

<div class="viewcode-block" id="StressResult.plot_stress_contour"><a class="viewcode-back" href="../../../rst/api.html#sectionproperties.analysis.cross_section.StressResult.plot_stress_contour">[docs]</a>    <span class="k">def</span> <span class="nf">plot_stress_contour</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sig</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">pause</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Plots filled stress contours over the finite element mesh.</span>

<span class="sd">        :param sig: Nodal stress values</span>
<span class="sd">        :type sig: :class:`numpy.ndarray`</span>
<span class="sd">        :param string title: Plot title</span>
<span class="sd">        :param bool pause: If set to true, the figure pauses the script until</span>
<span class="sd">            the window is closed. If set to false, the script continues</span>
<span class="sd">            immediately after the window is rendered.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># TODO: find a way to get better arrow lengths?</span>

        <span class="c1"># create plot and setup the plot</span>
        <span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
        <span class="n">post</span><span class="o">.</span><span class="n">setup_plot</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">pause</span><span class="p">)</span>

        <span class="c1"># plot the finite element mesh</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cross_section</span><span class="o">.</span><span class="n">plot_mesh</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">pause</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

        <span class="c1"># set up the colormap and contours</span>
        <span class="n">cmap</span> <span class="o">=</span> <span class="n">cm</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;jet&#39;</span><span class="p">)</span>

        <span class="c1"># if contour values are not all constant</span>
        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">sig</span><span class="p">)</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">amin</span><span class="p">(</span><span class="n">sig</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">1e-6</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">amin</span><span class="p">(</span><span class="n">sig</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">sig</span><span class="p">),</span> <span class="mi">10</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># ten contours</span>
            <span class="n">v</span> <span class="o">=</span> <span class="mi">10</span>

        <span class="c1"># plot the filled contour</span>
        <span class="n">trictr</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">tricontourf</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cross_section</span><span class="o">.</span><span class="n">mesh_nodes</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cross_section</span><span class="o">.</span><span class="n">mesh_nodes</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cross_section</span><span class="o">.</span><span class="n">mesh_elements</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">],</span> <span class="n">sig</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">)</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">trictr</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Stress&#39;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%.4e</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="c1"># finish the plot</span>
        <span class="n">post</span><span class="o">.</span><span class="n">finish_plot</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">pause</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">)</span></div>

<div class="viewcode-block" id="StressResult.plot_stress_vector"><a class="viewcode-back" href="../../../rst/api.html#sectionproperties.analysis.cross_section.StressResult.plot_stress_vector">[docs]</a>    <span class="k">def</span> <span class="nf">plot_stress_vector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sigx</span><span class="p">,</span> <span class="n">sigy</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">pause</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Plots stress vectors over the finite element mesh.</span>

<span class="sd">        :param sigx: x-component of the nodal stress values</span>
<span class="sd">        :type sigx: :class:`numpy.ndarray`</span>
<span class="sd">        :param sigy: y-component of the nodal stress values</span>
<span class="sd">        :type sigy: :class:`numpy.ndarray`</span>
<span class="sd">        :param string title: Plot title</span>
<span class="sd">        :param bool pause: If set to true, the figure pauses the script until</span>
<span class="sd">            the window is closed. If set to false, the script continues</span>
<span class="sd">            immediately after the window is rendered.&quot;&quot;&quot;</span>

        <span class="c1"># create plot and setup the plot</span>
        <span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
        <span class="n">post</span><span class="o">.</span><span class="n">setup_plot</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">pause</span><span class="p">)</span>

        <span class="c1"># plot the finite element mesh</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cross_section</span><span class="o">.</span><span class="n">plot_mesh</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">pause</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

        <span class="c1"># scale the colour with respect to the magnitude of the vector</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hypot</span><span class="p">(</span><span class="n">sigx</span><span class="p">,</span> <span class="n">sigy</span><span class="p">)</span>
        <span class="n">cmap</span> <span class="o">=</span> <span class="n">cm</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;jet&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">amin</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="o">!=</span> <span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">c</span><span class="p">):</span>
            <span class="c1"># only show the quiver plot if there are results</span>
            <span class="n">quiv</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">quiver</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cross_section</span><span class="o">.</span><span class="n">mesh_nodes</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cross_section</span><span class="o">.</span><span class="n">mesh_nodes</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">sigx</span><span class="p">,</span> <span class="n">sigy</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">)</span>
            <span class="c1"># apply the colourbar</span>
            <span class="n">v1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">amin</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="mi">10</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">quiv</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Stress&#39;</span><span class="p">,</span> <span class="n">ticks</span><span class="o">=</span><span class="n">v1</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%.4e</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="c1"># finish the plot</span>
        <span class="n">post</span><span class="o">.</span><span class="n">finish_plot</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">pause</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">)</span></div>

    <span class="c1"># TODO: implement examples for stress plot methods</span>

<div class="viewcode-block" id="StressResult.plot_stress_n_zz"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.StressResult.plot_stress_n_zz">[docs]</a>    <span class="k">def</span> <span class="nf">plot_stress_n_zz</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pause</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Produces a contour plot of the normal stress :math:`\sigma_{zz,N}`</span>
<span class="sd">        resulting from the applied axial load :math:`N`.</span>

<span class="sd">        :param bool pause: If set to true, the figure pauses the script until</span>
<span class="sd">            the window is closed. If set to false, the script continues</span>
<span class="sd">            immediately after the window is rendered.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Stress Contour Plot - $\sigma_{zz,N}$&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_stress_contour</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_zz_n</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">pause</span><span class="p">)</span></div>

<div class="viewcode-block" id="StressResult.plot_stress_mxx_zz"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.StressResult.plot_stress_mxx_zz">[docs]</a>    <span class="k">def</span> <span class="nf">plot_stress_mxx_zz</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pause</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Produces a contour plot of the normal stress :math:`\sigma_{zz,Mxx}`</span>
<span class="sd">        resulting from the applied bending moment :math:`M_{xx}`.</span>

<span class="sd">        :param bool pause: If set to true, the figure pauses the script until</span>
<span class="sd">            the window is closed. If set to false, the script continues</span>
<span class="sd">            immediately after the window is rendered.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Stress Contour Plot - $\sigma_{zz,Mxx}$&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_stress_contour</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_zz_mxx</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">pause</span><span class="p">)</span></div>

<div class="viewcode-block" id="StressResult.plot_stress_myy_zz"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.StressResult.plot_stress_myy_zz">[docs]</a>    <span class="k">def</span> <span class="nf">plot_stress_myy_zz</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pause</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Produces a contour plot of the normal stress :math:`\sigma_{zz,Myy}`</span>
<span class="sd">        resulting from the applied bending moment :math:`M_{yy}`.</span>

<span class="sd">        :param bool pause: If set to true, the figure pauses the script until</span>
<span class="sd">            the window is closed. If set to false, the script continues</span>
<span class="sd">            immediately after the window is rendered.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Stress Contour Plot - $\sigma_{zz,Myy}$&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_stress_contour</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_zz_myy</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">pause</span><span class="p">)</span></div>

<div class="viewcode-block" id="StressResult.plot_stress_m11_zz"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.StressResult.plot_stress_m11_zz">[docs]</a>    <span class="k">def</span> <span class="nf">plot_stress_m11_zz</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pause</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Produces a contour plot of the normal stress :math:`\sigma_{zz,M11}`</span>
<span class="sd">        resulting from the applied bending moment :math:`M_{11}`.</span>

<span class="sd">        :param bool pause: If set to true, the figure pauses the script until</span>
<span class="sd">            the window is closed. If set to false, the script continues</span>
<span class="sd">            immediately after the window is rendered.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Stress Contour Plot - $\sigma_{zz,M11}$&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_stress_contour</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_zz_m11</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">pause</span><span class="p">)</span></div>

<div class="viewcode-block" id="StressResult.plot_stress_m22_zz"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.StressResult.plot_stress_m22_zz">[docs]</a>    <span class="k">def</span> <span class="nf">plot_stress_m22_zz</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pause</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Produces a contour plot of the normal stress :math:`\sigma_{zz,M22}`</span>
<span class="sd">        resulting from the applied bending moment :math:`M_{22}`.</span>

<span class="sd">        :param bool pause: If set to true, the figure pauses the script until</span>
<span class="sd">            the window is closed. If set to false, the script continues</span>
<span class="sd">            immediately after the window is rendered.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Stress Contour Plot - $\sigma_{zz,M22}$&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_stress_contour</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_zz_m22</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">pause</span><span class="p">)</span></div>

<div class="viewcode-block" id="StressResult.plot_stress_m_zz"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.StressResult.plot_stress_m_zz">[docs]</a>    <span class="k">def</span> <span class="nf">plot_stress_m_zz</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pause</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Produces a contour plot of the normal stress</span>
<span class="sd">        :math:`\sigma_{zz,\Sigma M}` resulting from all applied bending moments</span>
<span class="sd">        :math:`M_{xx} + M_{yy} + M_{11} + M_{22}`.</span>

<span class="sd">        :param bool pause: If set to true, the figure pauses the script until</span>
<span class="sd">            the window is closed. If set to false, the script continues</span>
<span class="sd">            immediately after the window is rendered.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Stress Contour Plot - $\sigma_{zz,\Sigma M}$&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_stress_contour</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_zz_m</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">pause</span><span class="p">)</span></div>

<div class="viewcode-block" id="StressResult.plot_stress_mzz_zx"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.StressResult.plot_stress_mzz_zx">[docs]</a>    <span class="k">def</span> <span class="nf">plot_stress_mzz_zx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pause</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Produces a contour plot of the *x*-component of the shear stress</span>
<span class="sd">        :math:`\sigma_{zx,Mzz}` resulting from the applied torsion moment</span>
<span class="sd">        :math:`M_{zz}`.</span>

<span class="sd">        :param bool pause: If set to true, the figure pauses the script until</span>
<span class="sd">            the window is closed. If set to false, the script continues</span>
<span class="sd">            immediately after the window is rendered.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Stress Contour Plot - $\sigma_{zx,Mzz}$&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_stress_contour</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_zx_mzz</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">pause</span><span class="p">)</span></div>

<div class="viewcode-block" id="StressResult.plot_stress_mzz_zy"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.StressResult.plot_stress_mzz_zy">[docs]</a>    <span class="k">def</span> <span class="nf">plot_stress_mzz_zy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pause</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Produces a contour plot of the *y*-component of the shear stress</span>
<span class="sd">        :math:`\sigma_{zy,Mzz}` resulting from the applied torsion moment</span>
<span class="sd">        :math:`M_{zz}`.</span>

<span class="sd">        :param bool pause: If set to true, the figure pauses the script until</span>
<span class="sd">            the window is closed. If set to false, the script continues</span>
<span class="sd">            immediately after the window is rendered.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Stress Contour Plot - $\sigma_{zy,Mzz}$&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_stress_contour</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_zy_mzz</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">pause</span><span class="p">)</span></div>

<div class="viewcode-block" id="StressResult.plot_stress_mzz_zxy"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.StressResult.plot_stress_mzz_zxy">[docs]</a>    <span class="k">def</span> <span class="nf">plot_stress_mzz_zxy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pause</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Produces a contour plot of the resultant shear stress</span>
<span class="sd">        :math:`\sigma_{zxy,Mzz}` resulting from the applied torsion moment</span>
<span class="sd">        :math:`M_{zz}`.</span>

<span class="sd">        :param bool pause: If set to true, the figure pauses the script until</span>
<span class="sd">            the window is closed. If set to false, the script continues</span>
<span class="sd">            immediately after the window is rendered.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Stress Contour Plot - $\sigma_{zxy,Mzz}$&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_stress_contour</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_zxy_mzz</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">pause</span><span class="p">)</span></div>

<div class="viewcode-block" id="StressResult.plot_vector_mzz_zxy"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.StressResult.plot_vector_mzz_zxy">[docs]</a>    <span class="k">def</span> <span class="nf">plot_vector_mzz_zxy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pause</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Produces a vector plot of the resultant shear stress</span>
<span class="sd">        :math:`\sigma_{zxy,Mzz}` resulting from the applied torsion moment</span>
<span class="sd">        :math:`M_{zz}`.</span>

<span class="sd">        :param bool pause: If set to true, the figure pauses the script until</span>
<span class="sd">            the window is closed. If set to false, the script continues</span>
<span class="sd">            immediately after the window is rendered.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Stress Vector Plot - $\sigma_{zxy,Mzz}$&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_stress_vector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_zx_mzz</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sig_zy_mzz</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">pause</span><span class="p">)</span></div>

<div class="viewcode-block" id="StressResult.plot_stress_vx_zx"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.StressResult.plot_stress_vx_zx">[docs]</a>    <span class="k">def</span> <span class="nf">plot_stress_vx_zx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pause</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Produces a contour plot of the *x*-component of the shear stress</span>
<span class="sd">        :math:`\sigma_{zx,Vx}` resulting from the applied shear force</span>
<span class="sd">        :math:`V_{x}`.</span>

<span class="sd">        :param bool pause: If set to true, the figure pauses the script until</span>
<span class="sd">            the window is closed. If set to false, the script continues</span>
<span class="sd">            immediately after the window is rendered.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Stress Contour Plot - $\sigma_{zx,Vx}$&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_stress_contour</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_zx_vx</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">pause</span><span class="p">)</span></div>

<div class="viewcode-block" id="StressResult.plot_stress_vx_zy"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.StressResult.plot_stress_vx_zy">[docs]</a>    <span class="k">def</span> <span class="nf">plot_stress_vx_zy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pause</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Produces a contour plot of the *y*-component of the shear stress</span>
<span class="sd">        :math:`\sigma_{zy,Vx}` resulting from the applied shear force</span>
<span class="sd">        :math:`V_{x}`.</span>

<span class="sd">        :param bool pause: If set to true, the figure pauses the script until</span>
<span class="sd">            the window is closed. If set to false, the script continues</span>
<span class="sd">            immediately after the window is rendered.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Stress Contour Plot - $\sigma_{zy,Vx}$&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_stress_contour</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_zy_vx</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">pause</span><span class="p">)</span></div>

<div class="viewcode-block" id="StressResult.plot_stress_vx_zxy"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.StressResult.plot_stress_vx_zxy">[docs]</a>    <span class="k">def</span> <span class="nf">plot_stress_vx_zxy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pause</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Produces a contour plot of the resultant shear stress</span>
<span class="sd">        :math:`\sigma_{zxy,Vx}` resulting from the applied shear force</span>
<span class="sd">        :math:`V_{x}`.</span>

<span class="sd">        :param bool pause: If set to true, the figure pauses the script until</span>
<span class="sd">            the window is closed. If set to false, the script continues</span>
<span class="sd">            immediately after the window is rendered.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Stress Contour Plot - $\sigma_{zxy,Vx}$&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_stress_contour</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_zxy_vx</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">pause</span><span class="p">)</span></div>

<div class="viewcode-block" id="StressResult.plot_vector_vx_zxy"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.StressResult.plot_vector_vx_zxy">[docs]</a>    <span class="k">def</span> <span class="nf">plot_vector_vx_zxy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pause</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Produces a vector plot of the resultant shear stress</span>
<span class="sd">        :math:`\sigma_{zxy,Vx}` resulting from the applied shear force</span>
<span class="sd">        :math:`V_{x}`.</span>

<span class="sd">        :param bool pause: If set to true, the figure pauses the script until</span>
<span class="sd">            the window is closed. If set to false, the script continues</span>
<span class="sd">            immediately after the window is rendered.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Stress Vector Plot - $\sigma_{zxy,Vx}$&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_stress_vector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_zx_vx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sig_zx_vy</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">pause</span><span class="p">)</span></div>

<div class="viewcode-block" id="StressResult.plot_stress_vy_zx"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.StressResult.plot_stress_vy_zx">[docs]</a>    <span class="k">def</span> <span class="nf">plot_stress_vy_zx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pause</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Produces a contour plot of the *x*-component of the shear stress</span>
<span class="sd">        :math:`\sigma_{zx,Vy}` resulting from the applied shear force</span>
<span class="sd">        :math:`V_{y}`.</span>

<span class="sd">        :param bool pause: If set to true, the figure pauses the script until</span>
<span class="sd">            the window is closed. If set to false, the script continues</span>
<span class="sd">            immediately after the window is rendered.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Stress Contour Plot - $\sigma_{zx,Vy}$&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_stress_contour</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_zx_vy</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">pause</span><span class="p">)</span></div>

<div class="viewcode-block" id="StressResult.plot_stress_vy_zy"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.StressResult.plot_stress_vy_zy">[docs]</a>    <span class="k">def</span> <span class="nf">plot_stress_vy_zy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pause</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Produces a contour plot of the *y*-component of the shear stress</span>
<span class="sd">        :math:`\sigma_{zy,Vy}` resulting from the applied shear force</span>
<span class="sd">        :math:`V_{y}`.</span>

<span class="sd">        :param bool pause: If set to true, the figure pauses the script until</span>
<span class="sd">            the window is closed. If set to false, the script continues</span>
<span class="sd">            immediately after the window is rendered.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Stress Contour Plot - $\sigma_{zy,Vy}$&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_stress_contour</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_zy_vy</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">pause</span><span class="p">)</span></div>

<div class="viewcode-block" id="StressResult.plot_stress_vy_zxy"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.StressResult.plot_stress_vy_zxy">[docs]</a>    <span class="k">def</span> <span class="nf">plot_stress_vy_zxy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pause</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Produces a contour plot of the resultant shear stress</span>
<span class="sd">        :math:`\sigma_{zxy,Vy}` resulting from the applied shear force</span>
<span class="sd">        :math:`V_{y}`.</span>

<span class="sd">        :param bool pause: If set to true, the figure pauses the script until</span>
<span class="sd">            the window is closed. If set to false, the script continues</span>
<span class="sd">            immediately after the window is rendered.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Stress Contour Plot - $\sigma_{zxy,Vy}$&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_stress_contour</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_zxy_vy</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">pause</span><span class="p">)</span></div>

<div class="viewcode-block" id="StressResult.plot_vector_vy_zxy"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.StressResult.plot_vector_vy_zxy">[docs]</a>    <span class="k">def</span> <span class="nf">plot_vector_vy_zxy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pause</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Produces a vector plot of the resultant shear stress</span>
<span class="sd">        :math:`\sigma_{zxy,Vy}` resulting from the applied shear force</span>
<span class="sd">        :math:`V_{y}`.</span>

<span class="sd">        :param bool pause: If set to true, the figure pauses the script until</span>
<span class="sd">            the window is closed. If set to false, the script continues</span>
<span class="sd">            immediately after the window is rendered.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Stress Vector Plot - $\sigma_{zxy,Vy}$&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_stress_vector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_zx_vy</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sig_zy_vy</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">pause</span><span class="p">)</span></div>

<div class="viewcode-block" id="StressResult.plot_stress_v_zx"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.StressResult.plot_stress_v_zx">[docs]</a>    <span class="k">def</span> <span class="nf">plot_stress_v_zx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pause</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Produces a contour plot of the *x*-component of the shear stress</span>
<span class="sd">        :math:`\sigma_{zx,\Sigma V}` resulting from the sum of the applied</span>
<span class="sd">        shear forces :math:`V_{x} + V_{y}`.</span>

<span class="sd">        :param bool pause: If set to true, the figure pauses the script until</span>
<span class="sd">            the window is closed. If set to false, the script continues</span>
<span class="sd">            immediately after the window is rendered.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Stress Contour Plot - $\sigma_{zx,\Sigma V}$&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_stress_contour</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_zx_v</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">pause</span><span class="p">)</span></div>

<div class="viewcode-block" id="StressResult.plot_stress_v_zy"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.StressResult.plot_stress_v_zy">[docs]</a>    <span class="k">def</span> <span class="nf">plot_stress_v_zy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pause</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Produces a contour plot of the *y*-component of the shear stress</span>
<span class="sd">        :math:`\sigma_{zy,\Sigma V}` resulting from the sum of the applied</span>
<span class="sd">        shear forces :math:`V_{x} + V_{y}`.</span>

<span class="sd">        :param bool pause: If set to true, the figure pauses the script until</span>
<span class="sd">            the window is closed. If set to false, the script continues</span>
<span class="sd">            immediately after the window is rendered.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Stress Contour Plot - $\sigma_{zy,\Sigma V}$&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_stress_contour</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_zy_v</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">pause</span><span class="p">)</span></div>

<div class="viewcode-block" id="StressResult.plot_stress_v_zxy"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.StressResult.plot_stress_v_zxy">[docs]</a>    <span class="k">def</span> <span class="nf">plot_stress_v_zxy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pause</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Produces a contour plot of the resultant shear stress</span>
<span class="sd">        :math:`\sigma_{zxy,\Sigma V}` resulting from the sum of the applied</span>
<span class="sd">        shear forces :math:`V_{x} + V_{y}`.</span>

<span class="sd">        :param bool pause: If set to true, the figure pauses the script until</span>
<span class="sd">            the window is closed. If set to false, the script continues</span>
<span class="sd">            immediately after the window is rendered.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Stress Contour Plot - $\sigma_{zxy,\Sigma V}$&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_stress_contour</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_zxy_v</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">pause</span><span class="p">)</span></div>

<div class="viewcode-block" id="StressResult.plot_vector_v_zxy"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.StressResult.plot_vector_v_zxy">[docs]</a>    <span class="k">def</span> <span class="nf">plot_vector_v_zxy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pause</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Produces a vector plot of the resultant shear stress</span>
<span class="sd">        :math:`\sigma_{zxy,\Sigma V}` resulting from the sum of the  applied</span>
<span class="sd">        shear forces :math:`V_{x} + V_{y}`.</span>

<span class="sd">        :param bool pause: If set to true, the figure pauses the script until</span>
<span class="sd">            the window is closed. If set to false, the script continues</span>
<span class="sd">            immediately after the window is rendered.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Stress Vector Plot - $\sigma_{zxy,\Sigma V}$&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_stress_vector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_zx_v</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sig_zy_v</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">pause</span><span class="p">)</span></div>

<div class="viewcode-block" id="StressResult.plot_stress_zz"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.StressResult.plot_stress_zz">[docs]</a>    <span class="k">def</span> <span class="nf">plot_stress_zz</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pause</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Produces a contour plot of the combined normal stress</span>
<span class="sd">        :math:`\sigma_{zz}` resulting from all applied actions.</span>

<span class="sd">        :param bool pause: If set to true, the figure pauses the script until</span>
<span class="sd">            the window is closed. If set to false, the script continues</span>
<span class="sd">            immediately after the window is rendered.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Stress Contour Plot - $\sigma_</span><span class="si">{zz}</span><span class="s1">$&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_stress_contour</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_zz</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">pause</span><span class="p">)</span></div>

<div class="viewcode-block" id="StressResult.plot_stress_zx"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.StressResult.plot_stress_zx">[docs]</a>    <span class="k">def</span> <span class="nf">plot_stress_zx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pause</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Produces a contour plot of the *x*-component of the shear stress</span>
<span class="sd">        :math:`\sigma_{zx}` resulting from all applied actions.</span>

<span class="sd">        :param bool pause: If set to true, the figure pauses the script until</span>
<span class="sd">            the window is closed. If set to false, the script continues</span>
<span class="sd">            immediately after the window is rendered.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Stress Contour Plot - $\sigma_</span><span class="si">{zx}</span><span class="s1">$&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_stress_contour</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_zx</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">pause</span><span class="p">)</span></div>

<div class="viewcode-block" id="StressResult.plot_stress_zy"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.StressResult.plot_stress_zy">[docs]</a>    <span class="k">def</span> <span class="nf">plot_stress_zy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pause</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Produces a contour plot of the *y*-component of the shear stress</span>
<span class="sd">        :math:`\sigma_{zy}` resulting from all applied actions.</span>

<span class="sd">        :param bool pause: If set to true, the figure pauses the script until</span>
<span class="sd">            the window is closed. If set to false, the script continues</span>
<span class="sd">            immediately after the window is rendered.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Stress Contour Plot - $\sigma_</span><span class="si">{zy}</span><span class="s1">$&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_stress_contour</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_zy</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">pause</span><span class="p">)</span></div>

<div class="viewcode-block" id="StressResult.plot_stress_zxy"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.StressResult.plot_stress_zxy">[docs]</a>    <span class="k">def</span> <span class="nf">plot_stress_zxy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pause</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Produces a contour plot of the resultant shear stress</span>
<span class="sd">        :math:`\sigma_{zxy}` resulting from all applied actions.</span>

<span class="sd">        :param bool pause: If set to true, the figure pauses the script until</span>
<span class="sd">            the window is closed. If set to false, the script continues</span>
<span class="sd">            immediately after the window is rendered.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Stress Contour Plot - $\sigma_</span><span class="si">{zxy}</span><span class="s1">$&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_stress_contour</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_zxy</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">pause</span><span class="p">)</span></div>

<div class="viewcode-block" id="StressResult.plot_vector_zxy"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.StressResult.plot_vector_zxy">[docs]</a>    <span class="k">def</span> <span class="nf">plot_vector_zxy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pause</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Produces a vector plot of the resultant shear stress</span>
<span class="sd">        :math:`\sigma_{zxy}` resulting from all applied actions.</span>

<span class="sd">        :param bool pause: If set to true, the figure pauses the script until</span>
<span class="sd">            the window is closed. If set to false, the script continues</span>
<span class="sd">            immediately after the window is rendered.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Stress Vector Plot - $\sigma_</span><span class="si">{zxy}</span><span class="s1">$&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_stress_vector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_zx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sig_zy</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">pause</span><span class="p">)</span></div>

<div class="viewcode-block" id="StressResult.plot_stress_vm"><a class="viewcode-back" href="../../../rst/post.html#sectionproperties.analysis.cross_section.StressResult.plot_stress_vm">[docs]</a>    <span class="k">def</span> <span class="nf">plot_stress_vm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pause</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Produces a contour plot of the von Mises :math:`\sigma_{vM}`</span>
<span class="sd">        resulting from all applied actions.</span>

<span class="sd">        :param bool pause: If set to true, the figure pauses the script until</span>
<span class="sd">            the window is closed. If set to false, the script continues</span>
<span class="sd">            immediately after the window is rendered.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Stress Contour Plot - $\sigma_</span><span class="si">{vM}</span><span class="s1">$&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_stress_contour</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_vm</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">pause</span><span class="p">)</span></div></div>

<span class="c1"># def computeSectionProperties(self, points, facets, holes, controlPoints,</span>
<span class="c1">#                              materials):</span>
<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#     This function computes the the cross-section properties for the mesh.</span>
<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#</span>
<span class="c1">#     if (self.settings.plasticAnalysis):</span>
<span class="c1">#         # calculate global plastic properties</span>
<span class="c1">#         if (self.settings.outputLog):</span>
<span class="c1">#             processText = &quot;-- Calculating global plastic properties...&quot;</span>
<span class="c1">#         otherUtilities.functionTimer(</span>
<span class="c1">#             processText, self.computeGlobalPlasticProperties, points,</span>
<span class="c1">#             facets, holes, controlPoints, materials)</span>
<span class="c1">#</span>
<span class="c1">#         # calculate principal plastic properties</span>
<span class="c1">#         if (self.settings.outputLog):</span>
<span class="c1">#             processText = &quot;-- Calculating principal plastic properties...&quot;</span>
<span class="c1">#         otherUtilities.functionTimer(</span>
<span class="c1">#             processText, self.computePrincipalPlasticProperties, points,</span>
<span class="c1">#             facets, holes, controlPoints, materials)</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1"># def computeGlobalPlasticProperties(self, points, facets, holes,</span>
<span class="c1">#                                    controlPoints, materials):</span>
<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#     This method computes the plastic centroid and plastic section moduli</span>
<span class="c1">#     for global axis bending.</span>
<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#</span>
<span class="c1">#     # unit vectors in the x &amp; y directions</span>
<span class="c1">#     ux = [1, 0]</span>
<span class="c1">#     uy = [0, 1]</span>
<span class="c1">#</span>
<span class="c1">#     # compute plastic centroids and plastic section moduli:</span>
<span class="c1">#     # compute x-location of plastic centroid</span>
<span class="c1">#     (self.x_pc, topA, botA, topCenX, botCenX) = otherUtilities.pcAlgorithm(</span>
<span class="c1">#         self.settings.tol, 1000, uy, self.xmin, self.xmax,</span>
<span class="c1">#         points, facets, holes, controlPoints, self.nodes, self.elements,</span>
<span class="c1">#         materials, 1)</span>
<span class="c1">#</span>
<span class="c1">#     # compute y-location of the plastic centroid</span>
<span class="c1">#     (self.y_pc, topA, botA, topCenY, botCenY) = otherUtilities.pcAlgorithm(</span>
<span class="c1">#         self.settings.tol, 1000, ux, self.ymin, self.ymax,</span>
<span class="c1">#         points, facets, holes, controlPoints, self.nodes, self.elements,</span>
<span class="c1">#         materials, 2)</span>
<span class="c1">#</span>
<span class="c1">#     self.Sxx = self.area / 2 * abs(topCenY[1] - botCenY[1])</span>
<span class="c1">#     self.Syy = self.area / 2 * abs(topCenX[0] - botCenX[0])</span>
<span class="c1">#</span>
<span class="c1">#     # compute shape factors</span>
<span class="c1">#     self.SF_xx_plus = self.Sxx / self.zxx_plus</span>
<span class="c1">#     self.SF_xx_minus = self.Sxx / self.zxx_minus</span>
<span class="c1">#     self.SF_yy_plus = self.Syy / self.zyy_plus</span>
<span class="c1">#     self.SF_yy_minus = self.Syy / self.zyy_minus</span>
<span class="c1">#</span>
<span class="c1"># def computePrincipalPlasticProperties(self, points, facets, holes,</span>
<span class="c1">#                                       controlPoints, materials):</span>
<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#     This method computes the plastic centroid and plastic section moduli</span>
<span class="c1">#     for principal axis bending.</span>
<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#</span>
<span class="c1">#     # unit vectors in the 1 &amp; 2 directions</span>
<span class="c1">#     u1 = np.array(</span>
<span class="c1">#         [np.cos(self.phi * np.pi / 180), np.sin(self.phi * np.pi / 180)])</span>
<span class="c1">#     u2 = np.array(</span>
<span class="c1">#         [-np.sin(self.phi * np.pi / 180), np.cos(self.phi * np.pi / 180)])</span>
<span class="c1">#</span>
<span class="c1">#     # compute plastic centroids and plastic section moduli</span>
<span class="c1">#     (x1_pc, topA, botA, topCen1, botCen1) = otherUtilities.pcAlgorithm(</span>
<span class="c1">#         self.settings.tol, 1000, -u1, self.y2min, self.y2max,</span>
<span class="c1">#         points, facets, holes, controlPoints, self.nodes, self.elements,</span>
<span class="c1">#         materials, 1)</span>
<span class="c1">#     (y2_pc, topA, botA, topCen2, botCen2) = otherUtilities.pcAlgorithm(</span>
<span class="c1">#         self.settings.tol, 1000, -u2, self.x1min, self.x1max,</span>
<span class="c1">#         points, facets, holes, controlPoints, self.nodes, self.elements,</span>
<span class="c1">#         materials, 2)</span>
<span class="c1">#</span>
<span class="c1">#     # calculate the area centroids in the principal coordinate system</span>
<span class="c1">#     (tc1_1, tc1_2) = otherUtilities.principalCoordinate(</span>
<span class="c1">#         self.phi, topCen1[0], topCen1[1])</span>
<span class="c1">#     (bc1_1, bc1_2) = otherUtilities.principalCoordinate(</span>
<span class="c1">#         self.phi, botCen1[0], botCen1[1])</span>
<span class="c1">#     (tc2_1, tc2_2) = otherUtilities.principalCoordinate(</span>
<span class="c1">#         self.phi, topCen2[0], topCen2[1])</span>
<span class="c1">#     (bc2_1, bc2_2) = otherUtilities.principalCoordinate(</span>
<span class="c1">#         self.phi, botCen2[0], botCen2[1])</span>
<span class="c1">#</span>
<span class="c1">#     self.x1_pc = x1_pc * u2[0] + y2_pc * u1[0]</span>
<span class="c1">#     self.y2_pc = x1_pc * u2[1] + y2_pc * u1[1]</span>
<span class="c1">#     self.S11 = self.area / 2 * abs(tc1_2 - bc1_2)</span>
<span class="c1">#     self.S22 = self.area / 2 * abs(tc2_1 - bc2_1)</span>
<span class="c1">#</span>
<span class="c1">#     # compute shape factors</span>
<span class="c1">#     self.SF_11_plus = self.S11 / self.z11_plus</span>
<span class="c1">#     self.SF_11_minus = self.S11 / self.z11_minus</span>
<span class="c1">#     self.SF_22_plus = self.S22 / self.z22_plus</span>
<span class="c1">#     self.SF_22_minus = self.S22 / self.z22_minus</span>

<span class="c1"># def computeAreaSegments(self, u, px, py):</span>
<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#     This method computes the area above and below a line defined by unit</span>
<span class="c1">#     vector u and point(px, py)</span>
<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#</span>
<span class="c1">#     # allocate area variables</span>
<span class="c1">#     topA = 0</span>
<span class="c1">#     botA = 0</span>
<span class="c1">#     topQx = 0</span>
<span class="c1">#     topQy = 0</span>
<span class="c1">#     botQx = 0</span>
<span class="c1">#     botQy = 0</span>
<span class="c1">#     topCen = [0, 0]</span>
<span class="c1">#     botCen = [0, 0]</span>
<span class="c1">#</span>
<span class="c1">#     # loop through all elements in the mesh</span>
<span class="c1">#     for el in self.triElements:</span>
<span class="c1">#         # calculate area of element and its first moments of area</span>
<span class="c1">#         (elA, Qx, Qy) = el.areaProperties()</span>
<span class="c1">#</span>
<span class="c1">#         # if the element is not infinitessimally small (meshing artefacts)</span>
<span class="c1">#         if elA != 0:</span>
<span class="c1">#             # calculate the element centroid</span>
<span class="c1">#             elCen = [Qy / elA, Qx / elA]</span>
<span class="c1">#         else:</span>
<span class="c1">#             elCen = [0, 0]</span>
<span class="c1">#</span>
<span class="c1">#         # determine location of element and allocate element areas and</span>
<span class="c1">#         # first moments of area accordingly</span>
<span class="c1">#         if (otherUtilities.pointAboveLine(u, px, py, elCen[0], elCen[1])):</span>
<span class="c1">#             topA += elA</span>
<span class="c1">#             topQx += Qx</span>
<span class="c1">#             topQy += Qy</span>
<span class="c1">#         else:</span>
<span class="c1">#             botA += elA</span>
<span class="c1">#             botQx += Qx</span>
<span class="c1">#             botQy += Qy</span>
<span class="c1">#</span>
<span class="c1">#     # if the element is not infinitessimally small</span>
<span class="c1">#     if (topA != 0 and botA != 0):</span>
<span class="c1">#         # calculate the centroid of the top and bottom areas</span>
<span class="c1">#         topCen = np.array([topQy / topA, topQx / topA])</span>
<span class="c1">#         botCen = np.array([botQy / botA, botQx / botA])</span>
<span class="c1">#</span>
<span class="c1">#     return (topA, botA, topCen, botCen)</span>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Robbie van Leeuwen.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'0.0.1',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>